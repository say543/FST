=================
share path 
==================

\\DESKTOP-3J7614O\sharemodel
sharemodel (file://DESKTOP-3J7614O/sharemodel)


\\DESKTOP-3J7614O\sharemodeltest
sharemodeltest (file://DESKTOP-3J7614O/sharemodeltest)

for training data
\\DESKTOP-3J7614O\sharemodeltest\files_slot_training.tsv
\\DESKTOP-3J7614O\sharemodeltest\UWP_measurement_slot_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\UWP_head_slot_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\UWP_synthetic_slot_evaluation.tsv

\\DESKTOP-3J7614O\sharemodeltest\Validating_UWP_AllDomain_CIVPrime_RandomSampling_Feb-2019_Test-55kslot_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\Validating_UWP_Head_CIVPrime_RandomSampling_011018-123118-10kslot_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\Validating_UWP_AllDomain_QueryExpansionslot_evaluation.tsv

\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_20190716-20190831_16kslot_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_20190716-20190831_16kintent_evaluation.tsv

\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_20191001-20191031_7kintent_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_20191001-20191031_7kslot_evaluation.tsv


\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_20191101-20191130_10kintent_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_20191101-20191130_10kslot_evaluation.tsv



\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_JulyToSep_slot_evaluation.tsv



\\DESKTOP-3J7614O\sharemodeltest\UHRS_Task_3SFilesAnnotationintent_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\UHRS_Task_3SFilesAnnotationslot_evaluation.tsv


for blind to training data
\\DESKTOP-3J7614O\sharemodeltest\Reporting_Teams_20190716-20190831_3kslot_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\Reporting_Teams_20190716-20190831_3kintent_evaluation.tsv



files domain 怎麼onbaord 到evaluation
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1182483?_a=files
看這個pr




===================
people name lexicon
===================

<email_title>
People name from https://who/
有gunjan 的lexicon as well




=================
voice skill analyzing report
=================

<email_title>
Cortana Voice Skills in Teams
Shira Weinberg <shiraw@microsoft.com>

=================
generic selection model owner
=================
Hang Ren 北京team
他們現在也own 了  (原本是zhiguo 跟reaz)


=================
azure ml
=================
[4/15 4:04 PM] Yue Ma
    
https://ml.azure.com/fileexplorerAzNB?wsid=/subscriptions/ddb33dc4-889c-4fa1-90ce-482d793d6480/resourceGroups/DevExp/workspaces/DevExperimentation&tid=72f988bf-86f1-41af-91ab-2d7cd011db47
​[4/15 4:04 PM] Yue Ma
    你新建一个compute，然后把code upload上去，直接开terminal跑就行 (smile)
​[4/15 4:04 PM] Yue Ma
    
    
    
documents    
https://docs.microsoft.com/en-us/azure/machine-learning/tutorial-1st-experiment-sdk-setup
Tutorial: Create your first ML experiment - Azure Machine LearningIn this tutorial, you'll to get started with the Azure Machine Learning Python SDK running in Jupyter notebooks.  In Part 1, you create a workspace in which you'll manage experiments and ML models.docs.microsoft.com


=================
hard constraint , sof constraint 的  lu constraint 的processing code
=================
https://msasg.visualstudio.com/Cortana/_git/cortana-lu-engine?path=%2FLUEngine%2Fslu%2FSimpleFilteringPolicy.cs&version=GBmaster&_a=contents


by meeting (自己記憶)

1> show the file i was working  on
i wants canonical value
? not sure the purpose but can check

show the file we were wrking on
? has mentioned we do not support relation name

主要在
3.allow correcting the file name
disambiguation - what file do you want
confirmation turn - do you want to share this?

? generic selection 大概不能work

// slot support 就可以 intent 可能還好  
i want xxx 
lt review deck
i want a different file

? 問一下communication 怎麼support call 的


4. show fakkback options to create likeihood of success 
disambiguation - what file do you want
confirmation turn - do you want to share this?

None of these, None, No
   這個時候task form 不會complete
   
"show me more" etc. will result in further exhausting of MRU files 
   ? none 的case 沒有清楚 , none 可能是上一個
   這個時候可能就需要intent  有提到select_other 這種name
   
   ? generic selection 可以吃intent 嗎?
   可以的  可以吃select_other 跟select_none
   communication 已經有用  可以問eran
   
   這個是generic selection 的code 可以看到有用select_other select_none 的example
   https://dev.azure.com/msasg/Cortana/_git/Core?path=%2Fruntime%2Fservices%2FReactiveHost%2FSelection%2FGenericSelection%2FProcessor%2FPreSelectionProcessor.cs&version=GBmaster&line=106&lineEnd=106&lineStartColumn=27&lineEndColumn=44&lineStyle=plain
   
   
disambigation不管3.4 
都需要兩個turn
trun 1:
i want a different file / show me more  讓generic selection stop 然後  cortan 再問一句  what you want to open
trun 2:
lt revew deck, 這個時候 skill owns 了 才可以繼續

confirmation turn
不管3,4 都做不到continue task form
只吃confirm yes, no  必須要end task form 才可以下一個



by eran communication domain
有select_none 跟select_other
(command 只有select_none)

//intent pattern for generating select_none, select_other
luna_communication_enus_mv1.intents.selectNoneSendText.infile
luna_communication_enus_mv1.intents.selectNoneSendText.bin
related to conditional file

不確定是哪一個
可以再問eran
luna_190226_communication_enus_mv1.intent.pattern.conditions.hotfix
luna_190226_communication_enus_mv3_4.intent.pattern.conditions.hotfix.txt


    
// provide contact name  pattern
// using lexicon to match
luna_communication_enus_mv1.slots.contactNameOrPositionRef.infile
luna_communication_enus_mv1.slots.contactNameOrPositionRef.fst
同時可以prompted 的結果

conditional file
luna_190614_communication_enus_mv1.slot.pattern.conditions.hotfix.txt
可以再對應看一下怎麼work


originla communicagtion ticket
https://msasg.visualstudio.com/Cortana/_workitems/edit/2002299



=================
timex canonical value analysis
=================
//add new feature 
Oslo workshop on metrics deck in November        ClientContext_ReferenceTime     0       1       2020-04-16T09:30:55     1.0     -1      -1

output 
Oslo workshop on metrics deck in November       0:Timex:<!-- NOMATCH -->        1:Timex:<!-- NOMATCH -->        2:Timex:<!-- NOMATCH -->        3:Timex:<TIMEX3 tid="0" type="Date" value="XXXX-11">november</TIMEX3>   4:CanonicalEntity:ppt

=================
multi turn scenario 04232020
=================
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmicrosoft.sharepoint.com%2Fteams%2FTeamsxCortana431%2F_layouts%2FOneNote.aspx%3Fid%3D%252Fteams%252FTeamsxCortana431%252FShared%2520Documents%252FVoice%2520Skills%252FMicrosoft%2520Assistant%2520in%2520Teams%26wd%3Dtarget%2528Workstream%2520status%2520and%2520details.one%257CD3FCEC4A-92F6-4E42-B6C9-F1B144677CD8%252FFile%2520skill%2520improvements%257CA33A7B74-70AB-408D-B4BB-E256DA6983AB%252F%2529&data=04%7C01%7CChiehChun.Chang%40microsoft.com%7Cc42b300eed794702c6ab08d7e666bd55%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637231201367577121%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C-1&sdata=mQ1wVTu%2FNzBPiKIbZbMh81a%2FujjpRClqAZqHE3AEqwQ%3D&reserved=0




=================
contexul lu
=================

<email_title>
File contextual evaluation set V1
having dataset


怎麼跑?
不记得files的那几个external feature名字叫什么了，user contacts的就是一个叫"UserContacts"的列表，加到那个"Metadata" column里就行，跟那些PreviousTurnDomain什么的放一起
例子，

https://dev.azure.com/msasg/Cortana/_git/CoreScienceDataStaging?path=%2Fdatasets%2FDefault%2FTest%2FNonOfficial_Default_Communication_Synthetic_SRNBest_All.tsv


negative example (not sure why it does not work)
review summary vstm      UserFileNames    0       1       review summary  1       -1      1

positve case

Perf OKRs jpeg      UserFileNames    0       1       Perf OKRs  1       -1      1


positive case
// make sure feature names are correct
// by UserFileNamesKeyPhrases
review summary vstm      UserFileNames   0       1       Perf OKRs       1       -1      1       UserFileNamesKeyPhrases 0       1       review summary  1       -1      1
// by UserFileNames
UserFileNamesKeyPhrases
review summary vstm      UserFileNames   0       1       review summary  1       -1      1       UserFileNamesKeyPhrases 0       1       Pref OKRS       1       -1      1

=================
measurement set create possible documents
=================
https://microsoft.sharepoint.com/teams/CortanaCore/_layouts/15/Doc.aspx?sourcedoc={6d6ae133-c9c8-400d-bfd8-ae8feec6ff9f}&action=edit&wd=target%28LU%20Modeling%20and%20Partners%2FContextual%20LU%20and%20File%20Search.one%7C4f2f3ea8-4877-469b-9a5c-6a74e56efb91%2FMeasurement%20set%20creation%20logic%7C8b497f49-d02a-4a18-ae48-59bf02d8bc32%2F%29

=================
OKR
==================
Q4 2020
detailed and OKR
https://microsoft.sharepoint.com/teams/CortanaCore/_layouts/15/Doc.aspx?sourcedoc={6d6ae133-c9c8-400d-bfd8-ae8feec6ff9f}&action=edit&wd=target%28FY20%20Planning.one%7C274fbacb-b9ee-4eb5-a46b-41b55553ba23%2FDraft%20Proposal%7C86313e3f-089d-4f8c-a887-7e8436397d91%2F%29
https://microsoft.sharepoint.com/teams/CortanaCore/_layouts/15/Doc.aspx?sourcedoc={6d6ae133-c9c8-400d-bfd8-ae8feec6ff9f}&action=edit&wd=target%28FY20%20Planning.one%7C274fbacb-b9ee-4eb5-a46b-41b55553ba23%2FFinal%20Version%7Cbe413904-bcfb-4b26-a57d-cdc0d50f378e%2F%29



==============================
QASBatStatic   04142020
==============================
griffinsdf_M365Exp.QasBatW.queryprocessingconfiguration.ini
griffinprod_M365Search.QasBatW.queryprocessingconfiguration.ini

這兩個有 import 用grep 找到
但是這兩個master qpc 除非把所有的dolphin 都註解掉  否則跑步起來 (還沒試過  反正以後也不會用這個了)


==============================
MSW query set   04062020
==============================

<email_title>
requesting access to  MSW  query set
Re: Any search query set from MSO

<email>
Cortana MDP Data is now Available !!!
MDP_cortanaLU


<email_title>
michael stokes
因該有相關的mdata access 說明
Fw: New compliance guidance for Substrate Intelligence Platform


==============================
flight new domain model  04032020
==============================

正常程序先改flight 再改control tower(needing yubi key)

GriffinProd_Cortana.QAS12HttpQAS.ClientIdConfig.ini

step1:

有
// yue setup 好的
//他建議我用 lufeatureflight2
; Feature flight for lufeatureflight1
; Feature flight for lufeatureflight2
; Feature flight for lufeatureflight3

如果只想改teams 的traffic
Microsoft_Teams_enus_LuFeatureFlightTwo=luscenario:teams&feature.lufeatureflight2:1&ipe_locale:en-us,en-gb,en-au,en-in,en-ca
// comment below two
;Microsoft_UWP_enus_LuFeatureFlightTwo=luscenario:uwp&feature.lufeatureflight2:1&ipe_locale:en-us,en-gb,en-au,en-in,en-ca
;Microsoft_OMC_enus_LuFeatureFlightTwo=luscenario:outlookcommute&feature.lufeatureflight2:1&ipe_locale:en-us,en-gb,en-au,en-in,en-ca

這樣帶著feature  feature.lufeatureflight2 就會fall back 到UWP  OMC 的default  developer/microsoft/preview/public 的default ring
只有teams 的traffic 會 分percentage 一部分給  這個client id
Microsoft_Teams_enus_LuFeatureFlightTwo
      這個precentage 是在control tower submit request 說 percentage traffic 要帶 什麼feature (lufeatureflight2) 
      control tower不需要知道client id 只負責加traffic
      QAS收到featuure 在divert 在不同的 client id 


step2:
GriffinProd_Cortana.QAS12HttpQAS.queryProcessingConfiguration.ini
; Feature flight for lufeatureflight2
[query_domains:Microsoft_Teams_enus_LuFeatureFlightTwo]
deriveFromClient=Microsoft_Teams_enus_Public

override 一個新的files_domain_model 就可以 (參照 [query_domains:Microsoft_UWP_enus_Microsoft] 的config 就行)
用一個新的version 來做就可以




step3:
yubi key
https://microsoft.sharepoint.com/teams/CortanaCore/_layouts/15/Doc.aspx?sourcedoc={6d6ae133-c9c8-400d-bfd8-ae8feec6ff9f}&action=edit&wd=target%28Compliance.one%7C6bf6e4b5-7e77-4ffd-98e9-387243c735ec%2FEnroll%20Your%20YubiKey%7C69aa251d-a7e9-4fdd-908d-0e01a4dc7c44%2F%29
yubi key 要找grace要

then change control tower
dev 50% 依次submit change ,  100% 依次submit change (50%  可以configure 但是一班就走50)
microsoft 50% 依次submit change ,  100% 依次submit change (50%  可以configure 但是一班就走50)
preview / public 一班都部submit 


p.s 一班developer 100% 就把 把main qpc改过来，deploy之后stage那里就可以停了
    
bootcamp 說stop 會有問題是lutest那个flight，stop其实也没问题(因為會divert 到microsoft 的traffic as yue said)

但是這邊我測的是feature flight (優先及大於lutest)



一旦dev microsoft ready
就可以停掉flight then
either
1>(我prefer method 1)
在all_domain 直接用新的取代
or
2>
xxxx_enus_selfserve / xxxx_enus_developer / xxxx_enus_microsoft / xxxx_enus_preview / xxxx_enus_public
各別自己override







04282020 check in flight to lufeatureflight2
https://msit.powerbi.com/groups/ac565c9d-c6c8-4b00-bdb9-6696a7a347ce/reports/57ce1a45-4a9a-4168-9cc4-9982a0f00c14/ReportSection445b437c9a7a33795820
要看一下lu dashbaord
04302020
50% 50% deve

05012020
100% dev





conlufilename and conlufilenamekp are flights for full file name and file name key phrases respectively. 
The former is enabled in 50% of Microsoft Ring, the latter in 100% of Developer ring
這個是shobit 可能的kusto qquery
https://dataexplorer.azure.com/clusters/kusto.aria.microsoft.com/databases/e218bc2998bd4a9090d31c34974753fa




==============================
run griffin qpc with outputing related domains and with specified client id with new QCS tool
==============================

PS E:\CoreScienceDataStaging\datasources\Files\queryclassificationprocessing_new> .\QCSQueryLabelWithLES.exe --encoding utf-8 --legacyAllowUnusedParameters --verbose --loadingThreadsNum 1 --threadsNum 1 -c E:\searchgold\deploy\builds\data\answers\QAS12HttpQAS\ --variant GriffinProd_Cortana.QAS12HttpQAS --clientId "Microsoft_UWP_enus_Microsoft" -dl files,mystuff --interactive


==============================
SERP
==============================

03/24/2020
objective 2 (has been eliminated)
WPR file layer layer

needs ranker team to totally ranker
for 'my recent files'



MDP data will not be available, needing to replying on synthetic sets


query alteration
    query suggestion with high confidence
query suggestion
    query suggestion with low confidence
    will pop up sueggestion to select

NL alteration
     messages from Shuyin => from Shuyin
     inside VJ's modules to do that
     ? but why we need to do that i am unsure


possible flight throughs
{
"experimentalClientFlight": {
"enabled": true,
"value": "lutmsearchmsg,luskipalterationcheck"
}
}

asedebug
through this onenote
teams message form 
https://microsoft.sharepoint.com/teams/CortanaCore/_layouts/15/Doc.aspx?sourcedoc={6d6ae133-c9c8-400d-bfd8-ae8feec6ff9f}&action=edit&wd=target%28Microsoft%20Search%2FTeams%20Search%2FDRI%20Handbook.one%7Ce06520b7-920d-4fce-88c4-7e1022ec03eb%2FDebugging%20NL%20Search%20on%20V2%7C9e28dc0e-3ac9-4b2c-ba73-1fbeaea79c45%2F%29
Going  forward  to any issues, we can discuss what extra information can be logged through  https://asdebug snice XAP log is the only way we can monitor  issues



==============================
model d
==============================

compliant
GriffinSdf_Cortana.QAS12HttpQAS.queryProcessingConfiguration.ini
基本上都看這個吧  

//yue 說改prod 先不管sdf
GriffinProd_Cortana.QAS12HttpQAS.queryProcessingConfiguration.ini

先放developer
// from
[query_domains:Microsoft_UWP_enus_Developer]
deriveFromClient=Microsoft_Threshold_Shell_3_enus_CortanaSDK

//to
[query_domains:Microsoft_UWP_enus_Developer]
deriveFromClient=Microsoft_Threshold_Shell_3_enus_CortanaSDK
files=files_enus_mv2::qd_files
新加一個mv12 就可以overfride 原本files  對應的files=files_enus_mv1::qd_files


noncompliant
HttpQasProd_CortanaLU.QAS12HttpQAS.queryProcessingConfiguration.ini


===========================
person contact grammar
==========================

https://cortanalogviewer.azurewebsites.net/query/0eaf338fbb974833bc87f576a5b1d053
understanding -> QAS parameter -> QAS Featurization Outputs
有
previousTurnDomain
UserContacts"
UserFileNamesKeyPhrases
....

每一個hit QAS 都會傳這個一大包的informaiton
然後不同doamin extract

03092020
1> CMF supports 嗎?
要看是不是要自己家pipeline or 像previousTurndomain CMF 會幫你家

2> 
跟tom 的contexual lu 完全不一樣的路線
希望 userContact 跟fileName 都可以用同樣的方式來使用
有個intern 再用CMF_V2 在做

可以定期跟zhiguo sync

yong 已經做了一些contact_name in calendar 的實驗  可以之後問yong 看看




===========================
UWP configuration
==========================
03182020
E:\CoreScienceDataStaging\evaluation\Configs\AnnotationExceptions_uwp.xml
file_other exception ignore
<SlotIgnoreForIntent>file_other</SlotIgnoreForIntent>

配合domain pattern , intent pattern, 之後可以再check 要不要移除這個


==============================
files domain task form  repository
==============================
https://msasg.visualstudio.com/Cortana/_git/teams-skills?path=%2Fprivate%2FTeamsSkills%2FTeams%2Fsrc%2FTaskForms%2FTeamsOpenFile.json&version=GBmaster&_a=contents

https://msasg.visualstudio.com/Cortana/_git/teams-skills?path=%2Fprivate%2FTeamsSkills%2FTeams%2Fsrc%2FTaskForms%2FTeamsOpenFileV2.json&version=GBmaster&line=189&lineEnd=207&lineStartColumn=5&lineEndColumn=6&lineStyle=plain


<email_title> RE: Correct slots not getting produced
04202020

// 這個代表prompt for value
"MissingValue": "FileMissingDialogAct",	
// 這邊代表prompt for selection
selection 也可以做prompted for value 
if user says positon_refe, 選擇
if users says "string", generic model 會做string 的fuzzy search
"Disambiguation": "FileDisambiguationDialogAct",



openfileV1
from 
"SlotConstraintType": "Hard",
"SlotNames": [ "position_ref" ]
to
openfilev2
"SlotConstraintType": "Soft",
"SlotNames": [ "position_ref", "file_name", "file_keyword", "file_type" ]

When users say  ‘the first one’ then  generic selection will consume  position_ref.( here I confirm lu does generate correct slot)
When users say string, then lu slot does not affect result so generic selection will use that to do filter.
Thus, you should use Hard constraint to align with above scenario.
"SlotConstraintType": "hard",
"SlotNames": [ "position_ref" ]
    ?code 怎麼process 還不太懂
    
一旦generic take over  除了position_ref slot 會被filter 其他的slot 因該會被generic selection mode l給忽略
TCP Signals
tcp 是個platform

taskfrom Entitirys 代表是上個turn 的結果
eg:  "file_keyword",
"State" : "PromptedForSelection",
"Value" : "skills"
   代表上個turn 有填入的skills
   
LU Constraints
    這邊有cinstraunt type 還有盯著的slot
    
TaskFrame Status
    代表task form 有沒有continue



一班看log
https://cortanalogviewer.azurewebsites.net/query/5b332d12483d4c42953561235371654d

==============================
good pr following up during parental leave
==============================

// PR
//remove all teams, and  keep inmeeting, files and teamsaction only for icm
// also turn on deployment for files    
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1445551?path=%2Fmodels%2Ffiles%2Ffiles_enus_mv1.queryprocessingconfiguration.ini&_a=overview
// runtime remove PR for teams doamin, good reference  
https://msasg.visualstudio.com/Cortana/_git/Core/pullrequest/1447912




<done sync local>
//canonical value update 
// this that here -> reference
//yong
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1451373
到時候知道retrain 的時候要注意這個 已經被yong 給update

<done sync local>
// order might ne different also remove one duplicate
//hotfix update
//yue
// 新的client base 也是有ondevice
// 所以這邊只好ranker 做一些調整
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1477575?_a=files&path=%2Fmodels%2Ffiles%2Ffiles_enus_mv1.domain.1.hotfix.txt

<done sync local>
// negative patterns 避免跟communication overlap
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1484027?_a=files&path=%2Fdatasources%2FFiles%2Fresource%2Finfiles%2Fdomain.negative.infile
https://msasg.visualstudio.com/Cortana/_workitems/edit/2298667
03252020 看起來沒加好 他要mute 但是沒有mute 到全部


<目前yue  hotfix 只在QAS12....  不打算sync 到QasBat...  但是我也不認為task from 要被 update>
// 需要到時候revert 等到task form 切成file_seach instead of file_navigatefor show my recent files
// correct one pr
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1496916?_a=files
//wrong
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1495781?_a=files

//cast my planning presentation to this display
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1451545?_a=files
看起來現在這個算是inmeeting 了

//teamspace
//知道可以研究一下
// 因該是 skill teams 要做multi turn behavior 所以只有search 也要support 只好hotfix
//search
//search for
// looking for
// looking
// look for
// look
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1462006?_a=files



//client base 新的teams id 的  有相關的domains list for teamsclient
//client base evaluation PR 
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1466674

//team space keyword multi turn supported
// refer to the future
// 要跟 yue sync 一下
files 目前的ke

配合這個
"RE: Search Keyword LU issue"
有hard constraint or soft constraint  dictation 的constraint
參考page
https://cortanawiki.azurewebsites.net/engineering/gettingstarted/1pbfLuConstraints.html
'LU runtime perform filter/override action for constraints' 的整理　　(不同constraint by different components to consume 有不同的結果, 
這邊是postprocessing slot constraint 的討論)

dictation:
　　　　　lu runtime 把　lu result ignore lu runtime 會把整個string 當成一個slot
　　　　　result here:
　　　　　把default整個string 當成一個slot (. 是被 speech recogation給加上去的) 然後lu result 會被filter
         所以是把SR 的整個input 所以才有.
hard:
        lu runtime 把　lu result 根據skill 提供的list 來filter 
        只會用到lu 的result
soft:
        基本上沒有dictation 沒有hard 產生的功能
	? 

我猜因該是search for files(files domain) / search for (teams domains)
first turn 所以files  domain 因該已經support 
? 因該是train 還好　　有file_type 的還是有support 
雖然  slot.taskframe.file_keyword.promptedForValue.infile  有些support 但是沒完整　　最好把file_type 都加完整
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1466714?_a=files
配合file name



teamsaction communication pattern
can check if i need to replicate to files domain
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1485930?_a=files&path=%2Fdatasources%2FTeamsAction%2FFST_Source%2Fslot.positive.partial.infile


teamaction / inmeeting pattern
can check if i need to replicate to files domain
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1504765?_a=files

//inmeeting
// previous one , next one 等等的pattern 以後可能可以考慮support
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1510210?_a=files


//inmeeting
// 家multi turn 的golden quereis 可以之後follow multi turn case for golden queries
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1511874?_a=files


// inmeeeting
present xxx deck , prevent the recent deck
這個是inmeeting 的  留存紀錄
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1520013?_a=files



//calendar
conditional fst
可以研究一下 以後怎麼用
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1530630?_a=overview
=============================
unresolved bug and email_title
=============================


<done>
search for
updating pattern should work
when having time, get it fix
https://msasg.visualstudio.com/Cortana/_workitems/edit/2248764
domain.fst_lang_model.tagger.infile has used four patterns to consume, just need to check in
search for pattern is updated through this pr no ticket associate
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1431055?path=%2Fdatasources%2FFiles%2Fresource%2Finfiles%2Fdomain.fst_lang_model.tagger.infile&_a=files



<waititng for mohit to comnent i i think it is done>
search 
waiting for teamsaction and check pr to use it in files
but search pattern / find pattern need to update the same rule as well
https://msasg.visualstudio.com/Cortana/_workitems/edit/2258354


<done>
open review deck
fix is checked in but only for review xxx types, need to think if more synthetic data is needed
https://domoreexp.visualstudio.com/MSTeams/_workitems/edit/745833?src=WorkItemMention&src-action=artifact_link

bug
<comment on resolved 2/6>
<2/4 files auto deployment is opened but deployment happens early, so it will go 2/6>
//production bug
要用manasi  flow 找raw query
https://msasg.visualstudio.com/Cortana/_workitems/edit/2292554
https://cortanalogviewer-ppe.azurewebsites.net/query/67670e991c1e45ccbd378f341d1c6471/prod
根據email_title
RE: Can’t find user query for Cortana DSAT? Here’s how.
1.	Find the traceid. Let's assume that the query happened on October 18th, 2019.
   here is 01242020
   
	Navigate to: https://cosmos11.osdinfra.net/cosmos/science.prod/local/Projects/CEP/PROD/Cortana/Speech/2019-11-18/Teams.Sessionized.Kusto.Joined.Data.ss?property=info. If the query happened on a different day, then you would change the date in the path of the URL.
2.	In the "Custom Filter" field, enter either
	CivPTraceId == "<trace_id_in_lower_case>" For example: CivPTraceId == "ada3c4653ada4965ba60ef1dd80733d5" 
OR
	'UxoEventTraceId=="<trace_id_in_lower_case>"'. For example, you might enter in "UxoEventTraceId=="588435ac15de4e5b9cb563c9f644ab06"
	using  CivPTraceId == "67670e991c1e45ccbd378f341d1c6471" 
	uxo event 是一樣的
	using  UxoEventTraceId=="67670e991c1e45ccbd378f341d1c6471"
	
4.	Click the "Filter" button.

raw query 是
Send Saurabh Choudhury my voice design document.
跟　
https://msasg.visualstudio.com/Cortana/_workitems/edit/2290982?src=WorkItemMention&src-action=artifact_link
其中的一個fail query 是一樣的
  




bug
<comment on resolved 2/6>
<go deploy to voce skill>
<3s go 2/11 manually >
<email_title>
RE: state of union on reliability 
not BVT failed query
https://msasg.visualstudio.com/Cortana/_workitems/edit/2290982?src=WorkItemMention&src-action=artifact_link
Send Saurabh Choudhury my voice design document.
Saurabh Choudhury should be to_contact_name but file_keyword, lexicon does have it
add my synthesis traninig data


Send my voice 101 file to my 2:00 o'clock meeting.
to my should be to contact_name
2:00  should be meeting_starting time
meeting should be sharetarget

改成　share 2:00 o'clock meeting 一樣fail
share my voice 101 file to my 2:00 o'clock meeting

step1:
filx  o'clock issue  for share
先針對share 加上　　share with o'clock meeting, share to o'clock meeting
一個failed 的query "Send my voice 101 file to my 2:00 o'clock meeting." 也automatically fix

step2:
met1
用open_text_synthesis 試試看
send <to_contact_name>  <contact_name> <file_keyword> <file_type> 要加synthesis data 
發現synthesys script 沒有辦法　handle to_contact_name pretty well...
send TOsonwabiso   to 是額外的東西
必須要先parse TOCONTACTNAMEHOLDER then CONTACTNAMEHOLDER 因為substring 的關西
只修改這邊　　原本已經錯的synthesys 的data 就不動了ㄖ　以後再說



bug
<go deploy to voce skill>
<3s go 2/11 manually >
i can deploy once this ticket is triaged.
yes in second turn does not work
因該是common domain ?
https://msasg.visualstudio.com/Cortana/_workitems/edit/2284405
teamsaction 是others 但是inmeeting 卻是confirm, domain score 不重要　這邊confirm 
https://cortanalogviewer-ppe.azurewebsites.net/query/24324ef58ca64a9aaa2980b2bb289d7b/ppe


PR location
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1469744?path=%2Fsrc%2FEvaluation.Converged.Tests%2FEvaluationTestConfig.xml&_a=overview

但是實際在QAS run 的時候
Yes      PreviousTurnDomain      0       1       files   1.0     -1      -1
是會return confirm 的
the second one      PreviousTurnDomain      0       1       files   1.0     -1      -1
這個也是有　position_ref 的tag
? 猜測是silence 太久　然後 prevuiousTurnDomain 變成 common
用這個測試就match 了這個description 了　　可能要follow inmeeting 的加法
Yes\tPreviousTurnDomain\t0\t1\tcommon\t1.0\t-1\t-1
測試inmeeting by QCS　
不會被common trigger 而是直接本身的intent model yes 就輸出confirm 了
要馬intent model 重train (prefer filtering inmeeting intent training data 來做)
or 
加入detect common in multi turn pipeline




bug
這個的原因還不董 但是可能是common silence 造成的問題
但是
https://msasg.visualstudio.com/Cortana/_workitems/edit/2286572
https://cortanalogviewer-ppe.azurewebsites.net/query/aae2e3887cc5408fab27a0a05ec1a20e/prod

using  01-16 2020 to filter

turn 1
CivPTraceId == "aae2e3887cc5408fab27a0a05ec1a20e"
aae2e3887cc5408fab27a0a05ec1a20e
UxoEventTraceId=="aae2e3887cc5408fab27a0a05ec1a20e"
https://cosmos11.osdinfra.net/cosmos/science.prod/local/Projects/CEP/PROD/Cortana/Speech/2020-01-16/Teams.Sessionized.Kusto.Joined.Data.ss?property=info
raw query
Send my voice 101 file to A.J.
slot tagger no problem, all correct


turn 2
https://cortanalogviewer-ppe.azurewebsites.net/query/53ddbda4705548bb9c5d0d6eada1e176/prod
出現position ref
可能是selection

turn 3
common silence 所以fail 


bug
"Show me the last presentation I opened" gives very low score, whereas
"Show me the last ppt I opened" gives a high score and works as expected
可能是pattern 寫得不夠好　　　需要修改
https://msasg.visualstudio.com/Cortana/_workitems/edit/2320709



bug <pr done check in, DRI deploy 02262020, need to deploy to 3s as well>

show xxx deck
現在是negative pattern (by inmeeting 給cancel 掉)
要跟2320709 一起討論看看  或是client base 才能解
02262020
現在把show xxx deck 放到

https://msasg.visualstudio.com/Cortana/_workitems/edit/2321204
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1500742?_a=files


bug 
ranker 的'open text' 的東西
因為ranker 不想train.... 有空要follow up 一下
https://msasg.visualstudio.com/Cortana/_workitems/edit/2349062?src=WorkItemMention&src-action=artifact_link


bug
canonical value
excel sheet => excel
https://msasg.visualstudio.com/Cortana/_workitems/edit/2349055

powerpoint presentation => ppt
https://msasg.visualstudio.com/Cortana/_workitems/edit/2349052



bug
show me my file
show me my recent files 
都需要有file navigate.... shit 先不管吧
https://msasg.visualstudio.com/Cortana/_workitems/edit/2330092



bug 
3s
differnt language pattern
Files from Chad about semantic machines
? 必須檢查看看data 到底有沒有
https://msasg.visualstudio.com/Cortana/_workitems/edit/2324148

bug 
//old bug
https://domoreexp.visualstudio.com/MSTeams/_workitems/edit/778156
// new bug
https://msasg.visualstudio.com/Cortana/_workitems/edit/2319870
sure / share 都要是confirm intent
之前的retrain只有sure
可能要加share f

sure 比較簡單 因該已經work
share 需要
first turn 還是share
後面的turn 
需要用external set 來 train second trun
加到train data 就可以
可以參考一下calendar data 怎麼用　　這樣就可以resolve

這邊data
share / files/ file_share => confirm
share / common/ anyintent => confirm
原本share 還是keep share
//03032020
這樣會fail
需要看
https://msasg.visualstudio.com/Cortana/_git/Core?path=%2Fruntime%2Fcomponents%2FInterfaces%2Fsrc%2FSkills%2FSkillStatus.cs&version=GBmaster&_a=contents


TaskFrameStatus
https://msasg.visualstudio.com/Cortana/_git/Core?path=%2Fruntime%2Fcomponents%2FInterfaces%2Fsrc%2FSkills%2FSkillStatus.cs&version=GBmaster&_a=contents
InProgress
這樣才是multi turn
要多加column 跟用這個

但是這樣還是不夠  藥用calendar 裡面的
ConversationalContext
這個必須用這個format 
PreviousTurnDomain(calendar)TaskFrameStatus(inprogress)
ans : CMF是把所有类似PreviousTurnDomain(calendar)TaskFrameStatus(inprogress)的字符串都打包成一个字典bin文件，然后在线上直接那输入的字符串和那个字典bin做match
也就是說
TaskFrameStatus(inprogress)PreviousTurnDomain(calendar)
不能work

question 為何不要用兩個seperateed feature   PreviousTurnDomain   TaskFrameStatus  分別填1?
CMF 算法的限制
目前的算法只要看见有1就会可能有加分，所以最终的效果就是如果只有一个是1另一个为0的情况下，你的domain score也会增加，但理想情况是希望在这种情况下不加分，甚至最好减分
如果两个feature一个在+1，另一个-1，也不能保证最终合并在一起的时候+1的那个效果超过了-1的，最后其实还是在加分……


最好還是用合併的feature 缺保  satifsied case =1.  unsatisfed case = 0  一定拉的開


如果要判斷有沒有debug 
E:\fileAnswer_data_synthesis\CMF_training\output_adhoc_intent\intent_svm\tmp\train.tsv
external2 , external 3 , external 4 對應到你自己的 column 可能的value 
E:\fileAnswer_data_synthesis\CMF_training\output_adhoc_intent\intent_svm\tmp\unbuilt\intent.PreviousTurnDomain\build.json
不同的feature 這邊不因該是空的  因該要有指定的column
的說明  如果folder 是空的代表有問題 

please do\tPreviousTurnDomain\t0\t1\tcommon\t1\t-1\t1\tTaskFrameStatus\t0\t1\tInProgress\t1\t-1\t1








files_intent_training_01232020_PreviousCommon_work.tsv
//folder 有相關的結果
output_adhoc_intent_02122020_previousDomain_feature_train



bug
https://msasg.visualstudio.com/Cortana/_workitems/edit/2286583
open excel 因該是on device or files 終於要討論的
? client base 可能就可以解
finaly decision:
for queries like open excel, open word, etc. And we want Files to win on Teams (Mohit confirmed this) and OnDevice to win on UWP.


bug
<email_title>
Files LU slots issue with "dot" in the query
files 的tax form (yong 提供的　　不知道哪邊找的)
https://msasg.visualstudio.com/Cortana/_git/teams-skills?path=%2Fprivate%2FTeamsSkills%2FTeams%2Fsrc%2FTaskForms%2FTeamsOpenFile.json&version=GBmaster&_a=contents
?ashkay alawyas replies something unused

// my exaplanantion
因該是multi turn 的時候　dot 需要被拿掉
但是first turn 也要加這個 feature for traning 就是所謂的doc ... doc 的feautre     

現在的prompt by file_keyword 只有
目前只有presentation / deck 加上沒有dot 跟. 會被tag 成file_type
worked case
xxx presentation , xxx deck
failed case
xxx.presentation (.presentation as file_type)  , xxx.deck (.deck as file_type)
xxx dot presentation (xxx dot as file_keyword), xxx dot deck (xxx dot as file_keyword)

// all string being  file_keyword
xxx doc , xxx docs
xxx.docs, xxx.doc
xxx dot docs, xxx dot doc
? 這個decision 可能要在revisit
? 有必要這個可能會拿掉

p.s 
在coresciencestage 找 的grep command
grep -ri --include \*.infile regex .

也是可以轉成正常的fst 參照這個
luna_communication_enus_mv1.slots.contactPromptedForValue.infile





saliesh 的task form 
https://msasg.visualstudio.com/Cortana/_git/teams-skills?path=%2Fprivate%2FTeamsSkills%2FTeams%2Fsrc%2FTaskForms%2FTeamsOpenFile.json&version=GBmaster&_a=contents
LUConstraints
if from Dictation to Hard
lu result 必須是correct 
also,　即使加上file_type
根據lu constraints , contexual lu 因該也還是可以trigger


bug
<email tile>
RE: ICM sev3: mystuff domain
原因是現在的files 用mv5 from mystuff 然後　　prod 用 mv4
所以 'what is there on my todo list'  files domain 才會比my stuff 高　　否則因該一樣
solution:
1>
move files to client=base1
2> my stuff hotfix
3> files domain blacklist
resolved in this ICM
<email tile>
RE: [PROD] Sev 3: ID 172675706: LU not setting right intent score
RE: [PROD] Sev 3: ID 172805271: "Show my list called XXX" not triggering list skill



<email tile>
Search Keyword LU issue
this can study further 之後跟yong sync 跟hard constraint 有關

<email tile>
RE: 2232029 - File_navigate intent should win
Ling's reply
I will add case 6 into the below examples.

Case 6: Different query verbs, e.g., “find”, “search for”, “show me”, “go to”, “direct me to”, …. Examples below
-	Search for my recent files
-	Find the files that I  created yesterday
-	Show me all the shiproom deck
-	Go to the recent files tab
-	Direct me to recent files that Peter shared with me via email
-	Look for the MS build demo scripts

Current LU status:
-	Explicit navigation word such as “go to”, “direct me to” and “navigate to” will be grouped into file_navigate intent; explicit search word such as “search for”, “find me” will be grouped into the find_search intent. Any verb that are at the boundary will be grouped into file_search intent as default, for example, “show me”, “look for”, etc. To summarize, we don’t specifically mark up verb “search for” for now. 

等meeting note
目前direct me to recent files 會生成file_search  可能會需要改
但是看training data direct 都是file_navigate 可能是dsat 我想 
跟yue 要一下file 看起來  也沒有特別  可能真的就是dsat 在家進去train


<email title>
RE: Removal of Teams domain
teams domain can be removed - checking status update

<email title>
Mehar Yeleti shared "Enterprise Answer Measurement Proposal" with you.
for search 的documents 有空看一下


<email title>
RE: [PPE] Sev 3: ID 166100117: Teams skills affected with polite refusals because LU is giving higher score to 'teams' domain
這邊有回skill team 我們沒有辦法control 哪個domain 贏哪個  這樣回得很好


<email_title>
 [LU] DF: Query " Share the deck I was working on" gives the error " Cancelling the skill" when deck link is attached in the meeting
 inmeeting skill team 的file_recenc 討論           


<email_title>
RE: Sync-up on progress and remaining questions on switching to the new Files schema
this that 的canonical value 的討論
似乎就是要reference 了 
似乎還有別的討論


https://msasg.visualstudio.com/Cortana/_workitems/edit/2258354
search 的pattern 可以之後看teamsaction 的討論
pr 但是看起來不太合理  是hot fix search / search .
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1447300?_a=files


<email _title>
Re: Onboard Client Based Schema 
domain owner 可以了解一下


<email_title>
inmeeting file_recency 的討論
RE: Discuss the file_recency issue - meeting note (1/14)
這邊也有deprioritze attached queries here 的討論　　要follow up


<email_title>
career page, this is good
Some of you asked about the career stage profile in 1:1s. Below is the link I found. It should be useful as a guidance on what to expect for different levels. I encourage you to read and bring up your questions on career growth.
https://microsoft.sharepoint.com/sites/hrw/careerguide/Pages/careerguide.aspx





<email_title>
Re: DSVM for eyes-on experiments
not sure the purpose of it

<email_title>
Teams BVT set is alive
P/R
needs to revisit to see what queris should pass

<email_title>
RE: Sharing information about how to test LU models for Search and Assistants experiences 
lu model page new test 


<email_title>
LU Team Client Based Change on flight lutest for Teams tenant
yue 有獎cortana log tool lutest 之後看

<email_title>
demo domain
Re: [PROD] Sev 2: ID 171703129: Compliant cortana cannot get correct LU result which caused nightwatch test case failure
can ask further information

<email_title>
Teams client without irrelevant domains
lutest flight
移除不相關的domain for testing

<email_title>
[PROD] Sev 3: ID 172805271: "Show my list called XXX" not triggering list skill
not sure why files_domain will win 
用shorter query 看　沒有boost 阿...   不知道為啥麼現在才發現



<email_title>
3s 的query entity ., timex 討論
RE: Files Model
timex 
//files
Domain.QueryMetadata[0] =  <TIMEX3 tid="0" type="Date" value="2020-01-27">yesterday</TIMEX3>
// others
QueryEntity[0].QueryMetadata = <TIMEX3 tid="0" type="Date" value="2020-01-27">yesterday</TIMEX3>


<email_title>
RE: Empty QAS Response error
這邊有sdf people 的deubg 這個可以是以後deubg 很好的參照
yong 哥有很detail 說哪個service 沒有roll out 成功　　也有QAS DRI 的info



<email_title>
Discuss extend the current files domain schema to support shared/attached files scenarios
attached 的相關support 需要schema 的redefine
要follow up 可能的meeting note
new intent
attach_file in the schema and LU guideline. 
data source to support
attachment
data source to support 
attached (? 這個感覺因該是file _action 不太確定   )

<email_title>
Some tips to reduce LU model memory
b2 memor reduction tip
Minwoo and An ji both having tips to reduce memory
one note link
minwoo
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmicrosoft.sharepoint.com%2Fteams%2FCortanaCore%2F_layouts%2FOneNote.aspx%3Fid%3D%252Fteams%252FCortanaCore%252FShared%2BDocuments%252FCore%2BScience%252FCortana%2BCore%2BScience%26wd%3Dtarget(LU%2BModeling%2Band%2BPartners%252FModeling%2BScience.one%257C387885D6-CB02-44AC-8F87-600B621EA4A5%252FOptimizing%2BLU%2BModel%257CE5D37770-1597-4A65-87EC-6B8DE3B8C65A%252F)%26xsdata%3DMDR8MDF8SmkuQW5AbWljcm9zb2Z0LmNvbXwyZmFiZWE2MjNlNjA0ZWQyMzRkMjA4ZDdhNjk0NjE4MXw3MmY5ODhiZjg2ZjE0MWFmOTFhYjJkN2NkMDExZGI0N3wxfDB8NjM3MTYxMDI4NTU4MjIwNTc2fFVua25vd258VFdGcGJHWnNiM2Q4ZXlKV0lqb2lNQzR3TGpBd01EQWlMQ0pRSWpvaVYybHVNeklpTENKQlRpSTZJazFoYVd3aUxDSlhWQ0k2TW4wPXwtMQ%253D%253D%26sdata%3DMDhUSVlVUDlVblYvemxLRzFkNDgvdENpWFFYemhkbWg1cWNxbDNnWHpEWT0%253D&data=04%7C01%7CChiehChun.Chang%40microsoft.com%7C5740540428ae4122579808d7abf61c83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637166945863094903%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C-1&sdata=3iHdUwQxZkMpnh7HzABzsKJI3r%2FEHQi5b1J79hb2OLI%3D&reserved=0
minwoo pr
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1470383?_a=overview

an ji
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fmicrosoft.sharepoint.com%2Fteams%2FCortanaCore%2F_layouts%2FOneNote.aspx%3Fid%3D%252Fteams%252FCortanaCore%252FShared%2520Documents%252FCore%2520Science%252FCortana%2520Core%2520Science%26wd%3Dtarget%2528LU%2520Modeling%2520and%2520Partners%252FModeling%2520Science.one%257C387885D6-CB02-44AC-8F87-600B621EA4A5%252FOptimizing%2520FST%2520patterns%257C528F4599-1802-4380-A541-900CD7912651%252F%2529&data=04%7C01%7CChiehChun.Chang%40microsoft.com%7C5740540428ae4122579808d7abf61c83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637166945863084908%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C-1&sdata=1EUBinEhAxzemh6gGsF5w%2FyH%2F20dJCMSz1WGQ9%2B60gA%3D&reserved=0



<email_title>
Fw: [Announcement] ONNX Runtime v 1.1.0 available on QAS
ONNX 可以goolge 研究下


<email_title>
December 2019: Teams Voice Skill and Outlook Mobile Commute Data Sets - 2/4/2020
decemeber dataset 
88/89  for files doamin. not bad


<email_title>
EvalDiff in local runs
evaldiff can see through local

<email_title>
Fw: Knowledge Sharing Sessions 1: Model Configurations
qpc and other configuration, good for learning lots of configuration

<email_title>
MSAI Internal Internships
有所有的intership projects


<email_title>
Our mission
ye-yi renames teams name to user understanding.

<email_title>
Share File Meeting In LOOP bug
?不知道跟　previous turn common domain 有沒有關西
related tickets
https://msasg.visualstudio.com/Cortana/_workitems/edit/2286572
https://msasg.visualstudio.com/Cortana/_workitems/edit/2284405



<email_title>
Fw: [Announcement] QCS python wrapper available on QAS
QCS 用python
good, should take a look

<email_title>
Contextual LU - File Open Voice Skill - Update
contextual LU 的demo 結果


<email_title>
Inconsistent domain scores for files LU models resulting in over-triggering

我已經email 有回了　　需要提供feedback
有一些queries
可能要retrain model or  加negative pattern
要跟yong 討論一下
有些可以加上negative pattern
有些可以retrain domain
可能要真的retrain domain

<email_title>
Presentation for FlexGram/NER + DP
https://web.microsoftstream.com/video/064fe97b-e8f1-428d-a395-98a1cec79e21
不知道是啥  之後看


<email_title>
LU deployment through rings?
還不太確定  這個的 mapping 是啥意思
原本沒有ring 這邊新增ring 了
UXO	QAS Clients	Status	Jarvis traffic
Developer	Microsoft_OMC_enus_Developer	Ready	https://jarvis-west.dc.ad.msft.net/dashboard/share/1B855EC8

Microsoft	Microsoft_OMC_enus_Microsoft	50% Ready	https://jarvis-west.dc.ad.msft.net/dashboard/share/C5AC616B

Preview	Microsoft_OMC_enus_Preview	Ready	https://jarvis-west.dc.ad.msft.net/dashboard/share/AD0A91E3

Public	Microsoft_OMC_enus_Public	Ready	https://jarvis-west.dc.ad.msft.net/dashboard/share/1D94D75F


<email_title>
January 2020: Teams Voice Skill Data Sets - 2/18/2020
89/91 files
還不差


<email_title>
Re: Introducing a new, memory-efficient sparse linear model for language understanding
another memory comparison

<email_title>
Help collecting feedback for Teams Client Based LU
可以研究一下什麼時候fall back will win  condition 是很暴力的


<email_title>
Model flighting is ready to use for Teams, OMC, and UWP
這個因該per ring 的change
之後可以研究一下


<email_title>
Re: "Debug Cortana Service by 3S Dash" was shared with you
可以study later

<email_title>
Re: Introduce the CLU Studio Debug as the LU online model debugging tool
還沒try 但是可以幫助qp 嗎 因為qp 經不行了


<email_title>
[Announcement] Requesting work from the LU Data & Measurement Teams
reporting annotaiton error 的template


<email_title>
Initial QAS Validation Golden set added to Compliant Cortana in QAS Portal
防止DRI checkin 失敗的checking.


<email_title>
Cortana MDP Data is now Available !!!
heron data
https://substrate.microsoft.net/euclidai/projects
但是我看不到....


<email_title>
Fw: [Announcement]  NVIDIA Tesla M60 GPU available in Compliant QAS
新的GPU 有空可以follow

<email_title>
Query Expansion Tool
有空可以study 一下  縮然我自己可以expand

<email_title>
App_name lexicon analysis summarizeation
分析lexicon 的方法  蠻有趣的 可以思考看看contact name 能不能這樣用



<email_title>
new QAS documentation
這個qas documentation 的wiki 有很多東西可以看  這不錯!


<email_title>
RE: First step - NL File Search on SPO
vijay 的第一步可以看一下怎麼用
另外 file answer 這邊有提到
We have flighted files answer integration in MSIT (.2% in coverage) and got a flat scorecard. 

On endpoints like Outlook mobile where there is a files answer, our main goal to integrate with Query API is to ensure there is continuity in results when users navigate from answer to files tab to see all results. Files tab will be powered using Query API.

On endpoints like TM where there is no files answer (yet), we are using this integration to bootstrap NL file search requirements given the LU integration is not yet prioritized. @Mayank Chadha/@Hao Zhang (MSAI) as FYI. 



<email_title>
UWP for file skill
HW - Files Skill on UWP

<email_title>
HW- UWP Keyword Spotter 
還不太知道幹嘛 但是跟GA 因該也有關

<email_title>
Discuss a few ambiguous cases - meeting note
send xxx note 的follow up 
also applies to UWP
Potential conflict between note, email, files and communication domain on CoW


===========================
reporting set / validating set

===========================
november data
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1428838?_a=files

有december 的　　因該可以mining october 的validation set

===========================
evaluation merge directory runs qas12 totla QPC
===========================
provide client id
PS E:\CoreScienceDataStaging\datasources\Files\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\CoreScienceDataStaging\TestResults\EvaluationMergedDir\59DF11DA  --variant HttpQasProd_CortanaLU.QAS12HttpQAS -d files --clientid "Microsoft_Threshold_Shell_3_enus_Test"


--pdebug the same
--pdebug qd_files_domain_teams_boost_featurizer


run testing query the same 
Share file architecture with friends meeting\tFEATURE.CLUTEAMS\t0\t1\t1\t1\t-1\t-1
===========================
Substrate HttpQAS Debugger Update
===========================
email title
似乎是另外一個跟qp 有關的東西 but for substrate 


===========================
3s answer model roadmap
===========================
email thread
RE: Current status of 3S files answer
Here’s a list of Teams rings – for awareness.

// 很好的list for different build
Ring	Scope
Container	Code complete - not merged with main.
R0	Teams Dev
R1	Teams PMs + Dev
R2	Experiences and Devices Org
R3.9	MSIT
R3	TAP Customers
R4	General Availability (GA)

<email_title>
Virtual “Answers & Skills” workshop  
possible workshop, needing to join answer

===========================
B2 column
QasMSSearch01DS

memory 要profiling 才可以上b2
===========================

email thread with title
CR - Deploy files and calendar LU models to QasMSSearch... - 1471778 (Yong Ni)


0210 profiling
<email_title>
Re: Weekly project scrum - Deliver NL based File SERP for TM and MSO


0305
memori profiling 
onenote:https://microsoft.sharepoint.com/teams/CortanaCore/Shared%20Documents/Core%20Science/Cortana%20Core%20Science/LU%20Modeling%20and%20Partners/B2%20Deployment.one#3/5/2020%20local%20memory%20profiling&section-id=%7B5F498291-A459-40E5-A0CE-F96E0FBF0C37%7D&page-id=%7B2CD4CD73-7886-42C8-A7E8-428CFD9E0E4D%7D&end
https://microsoft.sharepoint.com/:o:/r/teams/CortanaCore/_layouts/15/WopiFrame.aspx?sourcedoc={6d6ae133-c9c8-400d-bfd8-ae8feec6ff9f}&action=edit&wd=target%28LU%20Modeling%20and%20Partners%2FB2%20Deployment%2Eone%7C5F498291%2DA459%2D40E5%2DA0CE%2DF96E0FBF0C37%2F3%5C%2F5%5C%2F2020%20local%20memory%20profiling%7C2CD4CD73%2D7886%2D42C8%2DA7E8%2D428CFD9E0E4D%2F%29
[Yesterday 3:17 PM] Yong Ni
    
可以，需要本地跑一下memory profiling，following 3/5/2020 local memory profiling  (Web view)，
​[Yesterday 3:17 PM] Yong Ni
    如果没有明显增加内存消耗，就可以直接上B2
​[Yesterday 3:22 PM] Chieh-Chun Chang
    如果增加就不行嗎?  我是還沒跑...
​[Yesterday 4:09 PM] Yong Ni
    从感觉上说的话，增加50MB就算多了


QCSQueryLabelWithLES.exe --encoding utf-8 --legacyAllowUnusedParameters --verbose --loadingThreadsNum 1 --threadsNum 1 -c d:\SearchGold\deploy\builds\data\answers\QASB2PlaceHolder --variant griffinsdf_M365Search.QASB2PlaceHolder --clientId "" -i "E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted\Teams\OfficialSets\Reporting_Teams_20190716-20190831_3k.tsv" --queryInColumn 5 -o E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted\Teams\OfficialSets\QASB2PlaceHolder.Default


//with client id
QCSQueryLabelWithLES.exe --encoding utf-8 --legacyAllowUnusedParameters --verbose --loadingThreadsNum 1 --threadsNum 1 -c E:\searchgold\deploy\builds\data\answers\QASB2PlaceHolder --variant griffinsdf_M365Search.QASB2PlaceHolder --clientId "" -i "E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted\Teams\OfficialSets\Reporting_Teams_20190716-20190831_3k.tsv" --queryInColumn 5 -o E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted\Teams\OfficialSets\QASB2PlaceHolder.Default

// no client id using single domain or no speficit doman
.\QCSQueryLabelWithLES.exe --encoding utf-8 --legacyAllowUnusedParameters --verbose --loadingThreadsNum 1 --threadsNum 1 -c E:\searchgold\deploy\builds\data\answers\QASB2PlaceHolder --variant griffinsdf_M365Search.QASB2PlaceHolder -d files -i "E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted\Teams\OfficialSets\Reporting_Teams_20190716-20190831_3k.tsv" --queryInColumn 5 -o E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted\Teams\OfficialSets\QASB2PlaceHolder.Default

// new data set location with all domains
.\QCSQueryLabelWithLES.exe --encoding utf-8 --legacyAllowUnusedParameters --verbose --loadingThreadsNum 1 --threadsNum 1 -c E:\searchgold\deploy\builds\data\answers\QASB2PlaceHolder --variant griffinsdf_M365Search.QASB2PlaceHolder -i "E:\CoreScienceDataStaging\datasets\TeamsVoiceSkills\Train\Reporting_Teams_AllDomain_SR_RandomSampling_20190716-20190831_3k.tsv" --queryInColumn 5 -o E:\CoreScienceDataStaging\TestResults\Evaluation\all.Default


QASB2PlaceHolder.Default.stats.output.txt 是output 的
===========================
terms  for 3S / 3s answer
===========================

word-wheeling
https://en.wiktionary.org/wiki/word-wheeling


recall link
link for user to click

OM
 ouput module
OD
  output desktop
OWA


TM
  team mobile
TD
  team desktop
  
  
MSB
   microsoft search business


MSO
    office term

WPR
   whole page relevance
   
   WPR + SERP(bing search engine)
   
   serp 


message domain 是純index search 的東西

whole page relevance 會有一個section for that
跟其他的lu 都沒有關西











schema transition test command fater incorporating teams / generic
========================
Hey Cortana share the attached PowerPoint.\tFEATURE.CLUTEAMS\t0\t1\t1\t1\t-1\t-1


========================
not yet deploy change starting from 11262019
========================

<not yet deploy for both>
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1488126?_a=overview

<both deploy, QAS auto, 3s myself>
wait for deployment and close related tickets
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1469744?path=%2Fsrc%2FEvaluation.Converged.Tests%2FEvaluationTestConfig.xml&_a=overview
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1471100?path=%2Fsrc%2FEvaluation.Converged.Tests%2FEvaluationTestConfig.xml&_a=overview




========================
E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted\Teams\OfficialSets
offical set name
========================
Reporting_Teams_20190716-20190831_3k

========================
sharepoint DF   enpoint possible result
=========================
https://microsoft.sharepoint-df.com/_layouts/15/sharepoint.aspx?a=1f019ae1-2de1-4f44-b723-00a6ec1d7445&q=files%20by%20ling&v=%2Fsearch


=================================================================
3s xap tool    
=================================================================
email thread
RE: Broken QAS provider for Files Answer

3s internal debug  tool
https://asdebug/

===============================================================
metric reporting 
===============================================================
11192019
july
91/88
August
91/87



===============================================================
RE: Sync-up on the timeline switching to new LU schema
===============================================================
schema transition skill schedule

=================================================================
HRS rule discussion email thread
Re: Discuss the release plan to separate in-meeting intents outside of Teams domain
=================================================================
有rule 的discussion 可以了解





=================================================================
3s debug tool    
=================================================================
email thread
Share a simple tool to test LU models for 3S Search answers
provided by Yong



=================================================================
CR - Add People LU model to QasMSSearch01DS. - 1410394 (Yong Ni)
=================================================================
放到B2 的 pr 可以參考一下　之後放files


============================
FW: Quick question about the scope of Files Skill on UWP

email thread, needs to discuss it in further
==============================
UWP local files search


======================
compliance path ticket
https://msasg.visualstudio.com/Cortana/_workitems/edit/2110312
======================
phone has a picutre of it as well
runtime data is redaptive
sr pipiline (以後的mpd 都還有)



==============
pcfg grammer 
==============

用people 參考
https://o365exchange.visualstudio.com/O365%20Core/_git/Griffin?path=%2Fsources%2Fdev%2FAutoSuggest%2Fsrc%2FLib%2FResources%2Fpeople_experimental.grammar.xml&version=GBmaster

用xml 參考
intent ,slot ,domian 都可以train

"pcfg_grammar": {
   "grammar_file": "${intent_pcfg_grammar_file}",
   "lexicon_desc_file": "${intent_pcfg_lexicons_file}"
   
 sajal path 
 \\SAJAL-DESKTOP\model_train_people_Answers\resource\pcfg
 
 new location
 \\SAJAL-DESKTOP\people_answer_grammar
 
 
saja 可能有自己改  等有用到在看


目前只有3s answer 有用 cortana 並沒有用
in 3s 
cortana_people_enus_mv1.intent.model.pipeline.txt
it has 
people_answers_grammar_v1.xml
cortana_people_enus_mv1.intent.mlg.pcfg.xml
兩個file 內容都是依樣的
 ? 可能要問sajal 為啥要這樣做 有啥好處
 ? 前者用來generate intent
 ? 後來用來生成feature for intent svm



for all *.snt files provided by London teams
But they say MSIT tenant CI Index
? 可能files answer team 也可以問一下  能不能也generate 這個




files 的grammer
https://o365exchange.visualstudio.com/O365%20Core/_git/Griffin?path=%2Fsources%2Fdev%2FAutoSuggest%2Fsrc%2FLib%2FResources%2Fdocuments_instantAnswer.grammar.xml&version=GBmaster&line=27&lineEnd=29&lineStartColumn=1&lineEndColumn=14&lineStyle=plain

commend
PS E:\fileAnswer_data_synthesis\CMF_training> .\bin\CLU.Core.1.2.305\MLGTools.exe feat2proc -fsrc=E:\fileAnswer_data_synthesis\CMF_training\resource\pcfg\pcfg.intent.lexicon.txt -fbin=E:\fileAnswer_data_synthesis\CMF_training\resource\pcfg\files_enus_mv1.pcfg.intent.mlg.lexicon.bin
E:\fileAnswer_data_synthesis\CMF_training\resource\pcfg\pcfg_study.xlsx has all detail

新commoand for domain

//v2
also specify different example location
.\bin\CLU.Core.1.2.305\MLGTools.exe feat2proc -fsrc=E:\fileAnswer_data_synthesis\CMF_training\resource\pcfg\pcfg_domain_examples\pcfg_v2\pcfg.domain.lexicon.txt -fbin=E:\fileAnswer_data_synthesis\CMF_training\resource\pcfg\pcfg_domain_examples\pcfg_v2\files_enus_mv1.domain.mlg.pcfg.lexicon.bin
//v3
.\bin\CLU.Core.1.2.305\MLGTools.exe feat2proc -fsrc=E:\fileAnswer_data_synthesis\CMF_training\resource\pcfg\pcfg_domain_examples\pcfg_v3\pcfg.domain.lexicon.txt -fbin=E:\fileAnswer_data_synthesis\CMF_training\resource\pcfg\pcfg_domain_examples\pcfg_v3\files_enus_mv1.domain.mlg.pcfg.lexicon.bin



==============
lexicon bin for slot training

this file name
slots.lexicon.desc.txt


MLGTools.exe 直接生成bin

1.2.341 folder 沒有MLGTool  
CMF 是共用底層的c++ 不用用到MLGTools.exe
兩個行為一不一樣很難說

==============
you can use mlgtool to compile this bin directly 

/? 1.2.341 no MLGTools.exe so using  1.2.301
E:\fileAnswer_data_synthesis\CMF_training> .\bin\CLU.Core.1.2.305\MLGTools.exe feat2proc -fsrc=E:\fileAnswer_data_synthesis\CMF_training\resource\LexiconFiles\slots.lexicon.desc.txt -fbin=E:\fileAnswer_data_synthesis\CMF_training\files_enus_mv1.slot.mlg.lexicon.bin

this will generate bin  in directory
E:\fileAnswer_data_synthesis\CMF_training\

with filename
files_enus_mv1.slot.mlg.lexicon.bin




已知
// . 不work
calendar_positive4:RegexICL(^(skype|join|connect|teams) .*?(event|meeting|appointment)s?$)
改成
// a-z ok
share_targetname_positive1:RegexICL(^(skype|join|connect|teams) [a-z ]* (event|meeting|appointment)s?$)


? 但是用CMF 生成 比直接compile lexicon bin 生成比較多的東西
最好用direct compile 測試  但是用CMF 最後生成一次  比較好




==============
email title 可以之後討論
RE: Teams client id on Mobile
==============
有說明teams 的client 



=====
share index from 3s teams
email title
====
Constraint index information:
•	Presentation on CI here 
•	Overview of grammar rules – here 
•	You can find samples queries along with the actual rules here
•	We currently allow queries on fileName, Author, FileExtension properties. We will be adding support for queries on shared by username and email (these are for attachment entities).  

Regards,
Arun


=============================
qcs query level bucketize output

email title
"Re: Generating confidence buckets for answers "

=============================

相關的command for yong
d:\qas\app\queryclassificationprocessing\QCSQueryLabelWithLES.exe -c d:\SearchGold\deploy\builds\data\answers\QAS12HttpQAS --variant cortana_calendar_enus_mv8 -d calendar -i E:\src\git\Cortana\CoreScienceDataStagingKingston\evaluation\AnnotationSetsConverted\Files\UHRS_Task_3SFilesAnnotation.Trimmed.Converted.tsv --queryInColumn 5

如果要改成files 在這邊
.\QCSQueryLabelWithLES.exe -c E:\CoreScienceDataStaging\models\files --variant files_enus_mv1  -d files -i E:\fileAnswer_data_synthesis\CMF_training\resource\Data\UHRS_Task_3SFilesAnnotation_after_filtering.tsv --queryInColumn 5



這個path 下有所以目前做過的分析
E:\fileAnswer_data_synthesis\CMF_training\analysis




=============================
3s answer teams patterns
=============================
3s answer teams pattern
https://msasg.visualstudio.com/Substrate/_git/SubstrateTools?path=%2Fsrc%2FTools%2FAnswerQualityTool%2FQueryGen%2FStaticContent%2FFilePositiveQueryPatternsWithSlots.txt&version=GC9da6aa8be4341cc97d4784052f27fc6b6c6337f0

跟
E:\fileAnswer_data_synthesis\CMF_training\resource\Data\file_type_measurement
3SAnswersOfflinePR.xlsx 的pattern 是一模一樣的
看起來沒有新的pattern

=============================
msb data mining
=============================
參考sajal 的discusssion 之後整理
scope studio 安裝整理
參考這個document
https://microsoft.sharepoint.com/:w:/r/teams/Cosmos/_layouts/15/WopiFrame.aspx?sourcedoc=%7b69768A80-3A08-414E-AF13-7072E692DCF9%7d&file=SCOPEStudio-Installation-Instruction.docx&action=default&cid=29412c01-974f-4229-942e-c0a50aee563d


參考email title from Thomas lin
'steps for query log mining'

以前tom 的applications
E:\mercury_scope\ScopeApplication1

用cosmo 11 discussion

在search bar
搜尋vc selector 就可以加上cosmo 11 science prod
這個是我們現在的solution

This creates a scope job.  You can track the jobs on the cluster at 
// 要改成cosmo 11
https://cosmos11.osdinfra.net/cosmos/science.prod/users/chiecha/

To see just your jobs, click the “My Jobs” tab.  
Each job also has a link, e.g., 
when I ran this, it created a link at https://cosmos09.osdinfra.net/cosmos/relevance/_Jobs/0804c692-0bc4-4c29-901b-117dbe4e60d5 .  
From the links, you can go to the “Script” tab to see the script that was run.  
The “Job Stages” tab tells you how close the job is to completing.

參考 msb_script1 or msb_script2 or msb_script3 or msb_script4

似乎data teams 的data
只有available 3個月


用QCSQuerylabel 跑dataset q
可以輸出一堆東西
//calendar examoke
queryclassificationprocessing\QCSQueryLabelWithLES.exe -c d:\SearchGold\deploy\builds\data\answers\QAS12HttpQAS --variant cortana_calendar_enus_mv8 -d calendar -i E:\src\git\Cortana\CoreScienceDataStagingKingston\evaluation\AnnotationSetsConverted\Files\UHRS_Task_3SFilesAnnotation.Trimmed.Converted.tsv --queryInColumn 5


注意不要改放external features column 這樣會造成讀external column 但是沒有data
// my common
.\QCSQueryLabelWithLES.exe -i E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted\Validating\Validating_Teams_20190716-20190831_3k.tsv --queryInColumn 5 --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\searchgold\deploy\builds\data\answers\QAS12HttpQAS\  --variant files_enus_mv1  -dl files

ouput 會輸出在同一個directory
eg: output xxx.maxent.output.txt
這個就是所謂的domain output
Validating_Teams_20190716-20190831_3k.tsv.files.maxent.output.txt

要跟sajaj 要bucketized 的code



'Build measurement set for 3S answers using MSB logs'
Just to clarify the purpose of this evaluation set for 3S after our offline sync.
1.	This 3S measurement set is aiming to represent the real user query distributions in MSB. After bucketize sampling, weight of each bucket will need to be included when creating this set.
2.	However, the target sampling that I’m working on is to create target sets that are aiming to have large coverage on data variance. The query pool for target sampling can be from multiple data sources. Frequency doesn’t play too much critical role here. Hence frequency/weight will not be included in this case.

Since 3S measurement set is prepared per domain, hence domain confidence score will be used for bucketize sampling. And we can get three sets in one run. There will be no need to use the semantic similarity approach (very time consuming when the pool is huge and this approach is not aether friendly).

Here are the steps:
1.	Build an aether pipeline to generate three raw measurements for annotation. Data source can be changed whenever needed. ( aether://experiments/eaf0f62c-9e59-4370-b3d7-d92c92b87800)
2.	Annotation pipeline to annotate each set independently for each domain (These annotation task will be scheduled after our first batch of Nov Teams and OMC data, ETA is around end of Nov)
3.	Check in CSDS repo. No DA review required for this case. Though it is measurement set, it will still be open for you to play with given this is the first set. 

Mode details can be found in this page. MSB Data Sampling  (Web view)

Please let me know if there is any question.





=============================
substrate data mining
=======================
we have developed one tool (in its baby version) which could allow you to play with self-substrate data to explore different techniques, and quick demo. for details refer ======
https://microsoft.sharepoint.com/:w:/t/LUKnowledgeandSearchRelevanceLUKAS/ER658CYsjUZOt6CDfDHckJoBmoIxrygzGCDPRY3T1gHeqw?e=Q02ZSd


=============================
domain model retraining
============================

參考mingwoo 的 communication domain training
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging?path=%2Fdatasources%2FCommunication%2FCMF%2Fresource%2FData&version=GBmaster
可能可以參照domain training 的samples


===========================
q2
email title has detail
FW: LU question on File skill on Windows
===========================
selection model needs some work
如果沒有cutoff 大概就不需要了

===========================
mutli turn

===========================
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging?path=%2Fdatasources%2FInMeeting%2Fintents.txt&version=GBmaster
根據這個link 要support multi turn

confirm
cancel
select_none
reject


1> if training 

calendar 的training data
https://cosmos09.osdinfra.net/cosmos/searchRelevance.aether.store/local/public2/datasources/cd3e40bd-f2a8-44a8-82b6-ac1551933f7d/cd3e40bd-f2a8-44a8-82b6-ac1551933f7d/preprocessed/calendar.train.intentsslots.tsv?property=info

 

https://cosmos09.osdinfra.net/cosmos/searchRelevance.aether.store/local/public2/datasources/cd3e40bd-f2a8-44a8-82b6-ac1551933f7d/cd3e40bd-f2a8-44a8-82b6-ac1551933f7d/preprocessed/calendar.train.intentsslots.generated.tsv?property=info


2> if using common domian
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging?path=%2Fmodels%2Finmeeting%2Fcortana_inmeeting_enus_mv1.domain_intents.multiturn.pipeline.txt&version=GBmaster

目前只有調intent
domain score 不管  反正打算把cut0off 一起拿掉
//cancel
cancel\tPreviousTurnDomain\t0\t1\tfiles\t1.0\t-1      -1

//reject 
no thank you\tPreviousTurnDomain\t0\t1\tfiles\t1.0\t-1      -1

//confirm
add it\tPreviousTurnDomain\t0\t1\tfiles\t1.0\t-1      -1

// select_none
none of these\tPreviousTurnDomain\t0\t1\tfiles\t1.0\t-1      -1

//position_ref
不管事single or multi turn 只要train 的對舊型
ten one  PreviousTurnDomain      0       1       files   1.0     -1      -1


promotedForValue for filekeyword
marketing slide\tPreviousTurnDomain\t0\t1\tfiles\t1.0\t-1\t-1\tTaskFrameEntityStates\t0\t1\tfile_keyword:PromptedForValue\t1\t-1\t-1

11302019
no promptedFroValue 是 什麼都沒有tag ( ? 這個行為有bug因為slide 因該是要正確的type 以後確認)
有provide 後
整個 變成filekeyword (? 這個行為有bug 因為不知道什麼pattern 要support)

但是這樣可以verify promotedForValue 是可以work的




===========================
retrun in selfhost ring
===========================
[query_domains:Microsoft_Threshold_Shell_3_enus_Test]
這個地方加上
files=files_enus_mv1::qd_files

=====================
1.0 to 0.99  domain pattern 
=====================
09/24/2019

recall will be very low
since teamsaction might have 1.00  but those queries are files 
sp fail


=====================
intent trade oof
=====================

Bring up ?
set to file_navigate at this point

Bring of

display




=======================
threshold cut off
=======================

QAS12 having the file
cortana_calendar_enus_mv8.queryprocessingconfiguration.ini

processabovedomainconfidencethreshold=0.4

must configure by yourself, cannot use CMF

adding to those
[qd_files_slot_featurizer]
[qd_files_slot_partial_pattern_featurizer]

for [qd_files_slot_featurizer]
this is added for common domain so do not apply cutoff

after short pattern boost 

[3s dataset _after_filtering]
<test 1>
all to intent and all slots
1>
processabovedomainconfidencethreshold=0.3
bef  after 
domain with issue more . query F1 download but query P/R increase

totla is 86  with domain issue
most
< 0.2
34 querys
<file_keywrod> by <contact_name>
<file_keywrod> <contact_name>




0.2 <= ....  <= 0.3 
34 querys
<file_keyword>
<contact_name>
<file_keywrod> by <contact_name>
<file_keywrod> <contact_name>


<test2>
only add 0.3 to slot




================
timex information
==================
.\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\searchgold\deploy\builds\data\answers\QAS12HttpQAS  --variant files_enus_mv1  -dl files

externalFeaturesColumn 的order 不重要  怎麼provide 會自己被parse 的樣子

        Inputs:
                ExternalInput1 (tag: 0, string: 7)
                        show[0,0]=1
                        the[1,1]=1
                        file[2,2]=1
                        i[3,3]=1
                        worked[4,4]=1
                        last[5,5]=1
                        week[6,6]=1
                ExternalInput2 (tag: 7, string: 0)
                        0[0,0]=1
                        0[1,1]=1
                        0[2,2]=1
                        4[3,3]=1
                        10[4,4]=1
                        7[5,5]=1
                        7[6,6]=1
                ExternalInput3 (tag: 0, string: 1)
                        2018-03-12 19:00[-1,-1]=1
        Output:
                Timex3 (tag: 0, string: 4)
                        <!-- NOMATCH -->[0,2]=0
                        <!-- NOMATCH -->[3,3]=0
                        <!-- NOMATCH -->[4,4]=0
                        <TIMEX3 tid="0" type="Date" value="2018-W10">last week</TIMEX3>[5,6]=1

================
memory evaluation
==================

0719 first model
E:\CoreScienceDataStaging\datasources\Files\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\searchgold\deploy\builds\data\answers\QasBatWStatic  --variant files_enus_mv1 -dl files



	Line 30: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E15677D8EB" String1="Memory delta for component files_enus_mv1::qd_files_preprocess_featurizer is 320 Kb; time delta is 14.349 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 33: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156795E55" String1="Memory delta for component files_enus_mv1::qd_files_domain_featurizer is 372 Kb; time delta is 6.641 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 41: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E1567C4285" String1="Memory delta for component files_enus_mv1::qd_files_intent_featurizer is 8 Kb; time delta is 6.645 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 45: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E1567EC62F" String1="Memory delta for component files_enus_mv1::qd_files_slot_featurizer is 8208 Kb; time delta is 8.839 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 52: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156815C72" String1="Memory delta for component files_enus_mv1::qd_files_slot_partial_pattern_featurizer is 6164 Kb; time delta is 7.634 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 55: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156837DDA" String1="Memory delta for component files_enus_mv1::qd_files_timeresolution_featurizer is 16424 Kb; time delta is 5.059 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 57: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E15683F2C2" String1="Memory delta for component files_enus_mv1::qd_files_domainclassifier is 0 Kb; time delta is 0.062 ms. Type is MLG34DomainClassifier. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 59: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156848EC0" String1="Memory delta for component files_enus_mv1::qd_files_queryparser is 0 Kb; time delta is 1.125 ms. Type is MLG34CrfQueryParser. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 61: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156855163" String1="Memory delta for component files_enus_mv1::qd_files_entityextractor is 4 Kb; time delta is 0.095 ms. Type is TokenEntityExtractorImpl. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 63: i,08/14/2019 13:46:25,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156864F0B" String1="Memory delta for component files_enus_mv1::qd_files_domaintaxonomy is 0 Kb; time delta is 4.481 ms. Type is MLG34DomainTaxonomyClassifier. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 65: i,08/14/2019 13:46:25,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E15687D489" String1="Memory delta for component files_enus_mv1::qd_files_timeresolution_metadataretriever is 4 Kb; time delta is 5.685 ms. Type is ExposeFeatureMetadataRetrieverImpl. Memory and time reporting are non-reliable because of asynchronous initialization."

around 40MB


=================
medadata
=================


=================
knowledge from teams
================
[10:27 AM] Yue Ma
    
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging?path=%2Fmodels%2Fteams%2Fluna_teams_slots.canonicalentities.file_filetype.txt&version=GBmaster => will keep the same canonical mapping in new domain

==============
items
===============

3s search
   need to find out what tests available?
   for golden sets
Scenarios tests
Integration Tests
FrisBee Test ( only for cortana)




how to sync with skill teams regularly?
    pretty hard
    
    
 scenarios is more detailed compared to intent
 one intent will have differene scenarios


07312019
swtich from CLU.core.1.2.286 to 1.2.305 for training 看看


================
07302019
files schema 跟team schema 討論
================


intent level 

1. file navigation intent
instance1 (for teams) for teams 這個部分 file_search mpa 回去file_navitation
    要考慮會不會產生overtrigged
instance2 (for 3s answer) 這個部分  file_search 還是file_search


<discuss>
跟skill teams 的討論  感覺不太care 是不是navigation intent, file search ?


show me my recent files / show me my files
show me files i was working on 
只用slot 無法分辨
一定要file navigate  有沒有slot 無關

but 
open the files I recently worked on
這個是file_open (在) spec 但是也需要 slot


所以需要maintain 兩個intent
slots 就用 file_recency (要不要包含I 再說) 跟file_action



  <action_item>
       teams_intent_training_after_filter.py done
       E:\fileAnswer_data_synthesis\CMF_training\resource\intents.txt 加intent



slot level

2. file_filerecency
   slot 變成 file_recency
   目前plan 用files 的file_action  (雖然只tag action, not i was)
    把一些特別的verb 轉成要求的file_recency 的canonical value
    來support 
    
    
3.1 file_sharetarget
   instance1 (for teams) for teams 這個部分 會expose for cortana skill team
   instance2 (for 3s answer)  這個tag 會被移除
   p.s 兩個physical instatnce 會有不同的featurier

<discuss>
    覺得file_sharetarget 要新加
    person 除非用canonical value 來tell 否則很難
    其他的很難train 我覺得


3.2 teammeeting_title
   instance1 (for teams) for teams 這個部分 會expose for cortana skill team
   instance2 (for 3s answer)  這個tag 會被移除
   p.s 兩個physical instatnce 會有不同的featurier

<discuss>
    覺得teammeeting_title 要新加
   
4. file_search
    直接給teams 同name
  
5. file_name or file_keyword
    直接給teams 同name
    
6. start_time
    直接給teams 同name
7.file_type
    直接給
    
   
   
目前剩下的issue
 1> two start_date  or start time issue  
 open the <?>last week<?> file i edited yesterday
 we can tag two start date 但是不知道skill teams 怎麼處理
  
  what are <file_keyword> last weeks tasks </file_keyword>
  find <file_type> note </file_type> from <start_date> last week </start_date> <file_keyword> to do ' s </file_keyword>
  <start_date> last week </start_date> ' s <file_type> notes </file_type>.
  
  yong : 這個先不管 丟給partner teams 
  要嘛只tag 一個 or  tag 2 個 但是先不管skill teams 會怎麼動
 2> 
 open the file <cnotact>A shares to me 
 open the file i share to susan
 
 if we need to differentaite, we might need to add two like from_contact_name and contact name.
 
 yong:
 加兩個slot 然後兩個都tag
   實際的my stuff data 兩個都存在
  
  
  <action_item>
       files_mystuff_after_filter.done
       
       用contact_name 跟to_contact_name
       這樣to_contact_name 基本都是i
       contact_name 有i 也一堆沒有i 的
       
       teams 的在說
       E:\fileAnswer_data_synthesis\CMF_training\resource\slots.txt 
       先加slots
       lexicons 的部分
       E:\fileAnswer_data_synthesis\CMF_training\resource\LexiconFiles\slots.lexicon.desc.txt
       把contact_name 跟to_contact_name 用不同lexciocn name 但是content 依樣
       contact_name:Trie(.\resource\LexiconFiles\contact_name.txt)
       tp_contact_name:Trie(.\resource\LexiconFiles\to_contact__name.txt)
       p.s 現在兩個裡面都沒有i (contact_name) and me(to_contact_name) 
       ? 可以之後考慮要不要加
       
       
       
      
       
       
       
   
  
 
 
  3>
  timeX issues
  
  yong:
  讓partner teams 去決定
  


 4>
  training issue
  <file_action>
  open photos
  show me a picture of one hundred and seven
  ? open / show  tagged as file_action  這個之後要討論一下  覺得不用tag
  work on 覺得只tag work 比較好  schema 要跟著調整
  my recent downloads
  ? downloads 不知道要不要tag
  
  
  attached 
  ? 不知道skill teams要不要  但是我覺得都先tag 吧 等compliant 再說
  
  
  titled <title> christmas list </title>
  titled 先 不tag file action
  
  <start_time>
  ? recent 藥用start time or file_recency  
  目前把recent / recently  大小寫都變成order_ref
  因為order_ref 要用來代替teams 裡面的 file_recency
  靠canonical value 來給
  
   
  find the task note i created last week  沒學好  要找找


  <order_ref>
   要保留
  因為order_ref 要用來代替teams 裡面的 file_recency
  
  <data_source>
     ? computer 覺得不因該是
     先留著等他抱怨再說
     ? outlook 不確定
     因為october validating set 很多  所以先把他當training set 加進去
  
  
  <file_name>
     沒有足夠的examples
     
     grocery list
     grocery 不是title 要轉乘keyword
     grocery list -> keyword -> file_keyword
     
     christmas list
     不是title 要轉乘keyword
     christmas list -> keyword -> file_keyword
     
     除非有title
     titled <keyword> christmas list </keyword>
     christmas list title -> file_name
     
     say hey cortana show me my task list
     tasl list -> keyword -> file_keyword
     
     find me my music list
     music list -> keyword -> file_keyword
     
     <keyword> music </keyword> <data_type> playlist </data_type>
     music playlist -> keyword -> file_keyword
  
  
     <title> shopping list </title>
      shopping list -> keyword -> file_keyword
      
      
      watch list
      music playlist -> keyword -> file_keyword
      
      walmart list
      walmart playlist -> keyword -> file_keyword
      
      ideas list
      
      
      ? named  something 
      look for he photos named " christmas
      先把它當成 title -> file_name 
      
      
      ? marked 要討論後面是file name or file type
      目前把called , titled 當作file_name
      現在先不管
      
  <file_keyword>
  
     因為list 在 file 不是tpye 
  
     what is on my <title> to-do </title> <data_type> list </data_type> ?
     這to-do list 都轉成keyword  -> file_keyword 因為沒有.doc
     
     
     show me my to do list
     to do list 要轉乘file_keyword
     
     what is in my shopping list
     shopping list 改成file_keyword
     
     <keyword> shopping </keyword> <data_type> list </data_type>
     
     find my <data_source> downloads </data_source>
     teams 裡面是data_type 但是這個file navigation 會給teams 
     怎麼tag 沒差  把她轉成file_keyword     
     
     
     what is in my <title> shopping list </title> ?
     shopping list 變成 keyword -> file keywrod
     
     
     // old 先不管
     team  不懂
     what is in my <keyword> shopping </keyword> <data_type> list </data_type> ?
     
     發現有data type 前面是keyword 比較難train 可以之後調整...


     where is my <data_type> music </data_type> library
     team  不懂
     music library 因該要轉成keyword
     
     <data_type> music </data_type> library
     
     
     mystuff	looking for my <keyword> resume </keyword> , <title> resumecurrent </title> .
     resume 因該什麼也不是
     resumecurrent  -> keyword -> file_keyword
     
     find the <data_type> note </data_type> with my <title> to - do list </title> .
     <title> to - do list </title> 轉成  keyword  -> file_keyword
     
     
     find my pictures from italy
     italy 變成keyword  -> file_keyword
     
     <data_type> visio diagrams </data_type>
     變成keyword  -> file_keyword
     
     windows 10 technical preview doc
     windows 10 technical preview -> k -> f
     
     ? search for justin and ashley in my files
     justin and ashley不確定要不要合併
     先consistent合併
     
     Find my <keyword> homework for tomorrow </keyword> .
     先把tomorrow
     
     <keyword> two thousand fourteen </keyword>
     ? 很難說是date or file key word 先不管
     有這個query 得先拿掉
     
     
     有query 是
     Open my <file_keyword> that I created </file_keyword> 
     會影響created 的traningi 目前沒有好的方法
     
     letters i wrote
     
     有query 是
     <file_keyword> a </file_keyword>
     會影響file_keyword 的  精確度
       
     open <file_title> this </file_title> 
          ? 這個沒有說 先follow up teams
         
     share <file_title> this </file_title> 
         guideline 有
	 
	 this -> file_title -> file_keyword
	 
	 
     red and second red
         先把整個全部都當成keyword
       
       
     new project
         有keyword 有沒有tag....
	 先把它當成keyword
	 
       
  <file_type>
     go to my <data_source> documents </data_source
     teams 是file navagate 沒有tag documents
     先都轉成data type
     
     take me to <data_source> documents </data_source>
     teams 不懂
     先都轉成data type
     
     show me my <keyword> lists </keyword>
     keyword 都轉成data_type
     teams 沒behavior
     
     
     
     
     show me the documents with <keyword> headache </keyword> in the title
     documents? 先不tag 
     
     
     
     
     
   
     <data_type> documents </data_type>
     <data_type> document </data_type>
     documents 先不tag by Ling
     
     <data_type> docs </data_type>
     <data_type> doc </data_type>
     doc 先不tag by Ling
     
     
     
     
     note
     ? 先留著等complain 再說  雖然list沒有說 但是可能會影響one note 的辨別
     要在investigate
     
     music
       ? 可能是file_type or file_keyword
       guideline 自己已經決定先當作file_type 等skill team compliant 再說
     photo
       guideline 自己已經決定先當作file_type 等skill team compliant 再說
     
     slide
     ? 先留著等complain 再說  雖然list沒有說 先follow teams  當作file_type
     
     documentation
     ? 先留著等complain 再說  雖然list沒有說
     
     ? notes 要不要之後看
       先留著等complain 再說  雖然list沒有說
     ? resume
        先留著等complain 再說  雖然list沒有說
	file_keyword
     ? movie
        先留著等complain 再說  雖然list沒有說
	
     ? email
       因該不是data type 先拿掉
       
     ? presentation 要不要之後看
     ? power point presentation
     ? photos
         先留著等complain 再說  雖然list沒有說
     ? pictures /picture
          先留著等complain 再說  雖然list沒有說
     ? app / apps
	  先留著等complain 再說  雖然list沒有說
     ? screenshots
          先留著等complain 再說  雖然list沒有說
     ? photographs
          先留著等complain 再說  雖然list沒有說
     ? letter /letters
       先不當作data_type 因為spec 沒有說
     ? text
       先留著 等complain 再說 雖然list 沒有說
     ? txt
       先留著等complain 再說  雖然list沒有說
     ? lock
       先留著等complain 再說  雖然list沒有說
     ? word
       先不當作data_type 因為spec 沒有說
       
     ? game / games 
       先不當作data_type 因為spec 沒有說
     ? list / lists / listing / list doc
        因為teams golden 的原因  先不把它當成file_type  follow teams
	all xxx list will not file file_type
	
     ? checklist
        先不當作data_type 因為spec 沒有說
	
	construction documents checklist
	
	(o)construction documents 是file_keyword , checklist 不是type
	or
	(x)construction documents checklist 整個事file_keyword
        ? confirm in the future
	
	doc 也不是file type 
     ? music 
     spec file type
        spec no longer file_type
     ? word
       先不當作data_type 因為spec 沒有說
     ? template
        先不當作data_type 因為spec 沒有說
     ?microsoft word
       先留著等complain 再說  雖然list沒有說
     ? microsoft office word
       先留著等complain 再說  雖然list沒有說
      
     ?Word document
       兩個token 都不mark
     ?word doc
        word 移出來  doc 變成data_type -> file_type
       
     
       
  
     09052019
     from file answer teams
     doc docs docx spec specs 都要tag'
       有data 要改正 
       
       doc docx 要把file name 跟docx 分開
       
       doc 比較重要在他的bug bash
       spec specs 還好
       
     workbook 沒data
       bug bash 沒有
     
     notebook 
     notebooks 
       沒啥dATA 但是要改正
       可能也要生DATA
       bug bash 沒有
       
    gif png
       可能要改正 有data
       bug bash 沒有
       
    msg
       沒啥太多的data 只有from file_name 可能可以增加
       bug bash 沒有
    ics 
       沒有data 要生
       bug bash 沒有
    vcs 
        沒有data 要生
	bug bash 沒有
    vsdx, vssx. .vstx. vsdm. vssm. vst,vdw, vss, vst
        沒有data 要生
	can use vsd query 來generate data
	bug bash 沒有
     mpp, mpt 
        沒有data 要生
	bug bash 沒有
	
	
	

    
       
      
       
      
      
     
     
     
     
     
     
     
     
  
   <data_source>
     what is in my <data_source> music file </data_source> 
     music 因該要是file key word
     teams 沒behavior

     <data_type> onenote </data_type>
     onenote 因該是 data_source
     8/7/2019 討論
     ? 需要offline discussion
     
     <data_source> notes </data_source>
     <data_source> note </data_source>
     notes 不是data source
     
     ?notepad 算不算
     
     
     ?excel 是不是data source
     no
     
     Check <data_source> my documents </data_source>
     ? my document 因該不是data source 之後再改
     
    <data_source> c:/document </data_source>
    
    <file_name> h:\documents </file_name>
       改成data source for consistent
    
    
    <data_source> %appdata%\microsoft\document </data_source> <file_keyword>
     <data_source> clean kind:=document </data_source>
        ? data source is not majority so keep it this way 都不改
     
     <data_source> document </data_source>
        ? document 目前agree 不是data type
	data source is not majority  so 都先不tag 
        <data_source> document </data_source>  -> document
     
   <contact name>
      mystuff	i want to see the <data_type> note </data_type> for <keyword> wendy ' s </keyword>
      ? wendy 不是人名  先不管  因為小寫
      
      
      find pictures of my wife
      ?  my wife 如果有my wife , my something 都先skip
      
      mystuff	<data_type> pictures </data_type> of <keyword> me when i was a baby </keyword>
      
      ? 這個case i 未必是cohtact name
      先skip
      
      
      show my pictures of sunset from kim
      ? 這個my 不知道是不是to_contact_name 先skip
      
      
   <file_recency>
      Show me the files that I was only using
      ? only 先不tag
      
   mystuff 相關
      give me my <keyword> copied </keyword> files
      ? 先把這個copied 轉成 file_actioned
      還不確定
      
      i created 
      
      
      Can you open my "I was working on recently" file for me
      ? 這個query 到底是要把整個變成 key word or 分成file keyword 跟
      
      i created 
      ? 這個query 也有相關的問題
      
      <order_ref> first </order_ref>
      first 因該要是position_ref 不是order_ref
      ? 目前先這樣寫到guideline 以後再說
      
      
      
      last night
      my stuff 是start_time
      calendar 是start_date
      ? 先follow calendar 當作start_date
      
      
   <file_folder>
      show my downloaded files
      downloaded 也當成 <keyword> -> file_folder
   
   teams 相關
     cortana find my <order_ref> most recent </order_ref> <keyword> downloads </keyword>
     要轉成file_recency 
     downloads -> data_type -> file_type
     
     find me <quantifier> all </quantifier> documents
     documents -> data_type -> file_type

     where are my downloads
     downloads -> data_type-> file_type
     
     
     
     
     find downloads / open downloads
     teams no action 
     先把downloads 當成keywords -> file_keyword
     
     find my downloads
     teams 有action 但是覺得不合理
     先把downloads 當成keywords -> file_keyword
     
     where can i find my latest downloads
     
     check my downloads
     teams no action 
     先把downloads 當成keywords -> file_keyword
     
    
     pull up my <data_source> downloads </data_source>
     teams 到download 只好變成data_type 
     
     downloads -> data_type-> file_type
     
     
     take me to my downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type
     
     take me to downloads
     teams 到download 只好變成data_type 
     
     downloads -> data_type-> file_type
     
     go to my downloads
     downloads -> data_type-> file_type
     
     view downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type  
     
     view my most recent downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type  

     
     i'm looking for my latest downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type  
     
     bring up my downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type  
     
     show me downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type 
     
     show me all my downloads
     
     show me my <start_time> recent </start_time> downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type   
    
     tell me my downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type
     
     pull up all my downloads
     
     
     
     
     <meeting_starttime>
     ? 這個是可能可以改的  但是不確定前先不改成這樣
     my stuff
     what are the notes from today ' s meeting
     today 變成meeting_starttime
     meeting sharetarget_type
     
  <file_folder>
     <file_filetype> downloaded files </file_filetype>
     根據spec 先改成
     <file_folder> downloaded </file_folder> files
     intent 根據不同的queries verb 可能會不同
     但是這個type 永遠在
     
   <to_contact_name>
     ? share to someone
     因為teams 有tag 現在先tag以後再根據skill team 而感
     
     
====================
work konwledge
===================



可能的directory
E:\searchgold\deploy\builds\data\answers\QasBatWStatic
E:\searchgold\deploy\builds\data\answers\QasBatWStatic


可能的command



my stuff for reference
PS E:\CoreScienceDataStaging\datasources\Email_my_temporary\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\SearchGold\deploy\builds\data\answers\QAS12HttpQAS  --variant cortana_mystuff_enus_mv5 -dl mystuff


email for reference
PS E:\CoreScienceDataStaging\datasources\Email_my_temporary\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\SearchGold\deploy\builds\data\answers\QAS12HttpQAS  --variant email_enus_MV1b -dl email


teams for reference
PS E:\CoreScienceDataStaging\datasources\Teams\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\CoreScienceDataStaging\target\distrib\Debug\x64\models  --variant HttpQASINT_ML_OFFLINE_QAS_EVAL_INT.QAS01HttpQAS -d teams


files for reference
PS E:\CoreScienceDataStaging\datasources\Files\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\CoreScienceDataStaging\models\files  --variant files_enus_mv1 -dl files


fst file
PS E:\CoreScienceDataStaging\datasources\Files\resources\infiles> .\fst.exe -l .\slot.fst.partial.infile



如果不確定  在qp 看一下怎麼handle start time  / time slot 


directory
store single models
E:\CoreScienceDataStaging\models\file

do query processing analysis
PS E:\CoreScienceDataStaging\datasources\File\queryclassificationprocessing>

file requirement
https://microsoft.sharepoint.com/:w:/t/STCISearch/EaBGV9tupU1PmE29wtUY6lsBqveJnS9-utZtQ8TFExpihQ?e=W1Uue8


原始doucment
https://microsoft-my.sharepoint-df.com/:w:/p/yum/ERiEN4JphLNMgmNPr8ZUI2oBfNz5tleqQOFnMocgljoycw?rtime=-i-wKDYK10g


自己的comment
https://microsoft-my.sharepoint-df.com/:w:/r/personal/chiecha_microsoft_com/_layouts/15/Doc.aspx?sourcedoc=%7BFFA3E814-A82C-419B-9F83-117766DFC20A%7D&file=Document%201.docx&action=editnew&mobileredirect=true



=====================
domian training 打算  03022020
=====================

build.files.domain.json
run.build.domain.cmd

執行command
.\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 -c  E:\fileAnswer_data_synthesis\CMF_training\output_domain\post\final  --variant model  -dl files


step1: <這個已經打通了flow with domain score>
media control data
mystuff
只留著with file type
其他 domain 都留著
E:\fileAnswer_data_synthesis\CMF_training\output_domain_only_mediacontrol_03022020v1
also training data inside

測試pattern domain score


E:\fileAnswer_data_synthesis\CMF_training\resource\Data\sharemodel
// without any patterns

跟新data set
E:\fileAnswer_data_synthesis\CMF_training\resource\Data\UHRS_Task_3SFilesAnnotation_after_filtering_all_domain_with_file_type_correction.tsv
因為有query 沒有file type 也被標成files

// old model
.\QCSQueryLabelWithLES.exe -c E:\fileAnswer_data_synthesis\CMF_training\resource\Data\sharemodel_original_domain_bef_retrain\ --variant files_enus_mv2  -d files -i E:\fileAnswer_data_synthesis\CMF_training\resource\Data\UHRS_Task_3SFilesAnnotation_after_filtering_all_domain_with_file_type_correction.tsv --queryInColumn 5


// new model
.\QCSQueryLabelWithLES.exe -c E:\fileAnswer_data_synthesis\CMF_training\resource\Data\domain_retrain\ --variant files_enus_mv2  -d files -i E:\fileAnswer_data_synthesis\CMF_training\resource\Data\UHRS_Task_3SFilesAnnotation_after_filtering_all_domain_with_file_type_correction.tsv --queryInColumn 5


files_enus_mv2.queryprocessingconfiguration.ini

// with pattern

=====================
domian pattern 打算  07252019
=====================
from teams domain pattern
[qd_teams_domain_fst_lang_model_featurizer]
negative patterns 這個

domain.negative.fst_lang_model.tagger.infile

file_open -> FileOpenNegativeDomain
這個可能要加進來
這個是contextual negalive tlist 
read text ../lexicons/contextual_negative_list.txt;
define ContextualFileOpenEntity;
之後migrate contextual lu 可能需要有他來用

有其他相衝domain 的pattern
目前不打算把它加進去
如果是negative 就是doamin score = 0, 因為後面0.5 的限制 (但是在files 現在沒有) 所以不會trigger 後面的行為
如果以後需要 可能要家0.5 的threshold (or 別的threshold)

[qd_teams_domain_fst_lang_model_intent_overwrite_featurizer]
positive pattern 的部分
domain.fst_lang_model.tagger.infile

有file_open
file_download -> FileDownloadIntent 可能要家一下


file_download
file_navigation 
file_share

teamspace_sharechannel
teamspace_sharetab
    改成 file_share
    可能以後再evaluate 到底需不需要他
teamspace_search
    改成file_search
    
teamspace_navigate
    改成 file_navigate
    可能以後再evaluate 到底需不需要他
    
    
也要加
但是細節上可能要再調整
因為有些case 現在希望是file_search 了  根據files 的guideline
之後再調整


但是這個是沒有domain svm 的情況
可能測試一下是要前面or 後面


[qd_teams_domain_pattern_featurizer]
感覺是另外一個positive pattern 的位置
domain.override.infile

file_navigate
   跟 domain.fst_lang_model.tagger.infile 的file_navigate 不完全相同
   domain.override.infile 多了recent 了一些東西

file_open
   domain.fst_lang_model.tagger.infile 沒有這個  是posive pattern 可以加
teamspace_search
   domain.fst_lang_model.tagger.infile 完全依樣
   不用加
file_share
   跟 domain.fst_lang_model.tagger.infile 的file_navigate 不完全相同
   domain.fst_lang_model.tagger.infile cover 的比較多
   
   
yue 說當初一個pattern 是1.0 另一個是0.99 但是現在score 都是0.99 了  所以直接merge 取最大的就可以





[qd_teams_common_domain_intent_featurizer]
luna_teams_intents.multiturn
特別處理跟common 的關西避免conflict in teams multi turn
可以先不管  

=====================
intent pattern 打算  07252019
=====================
after svnm


[qd_teams_intents_fst_lang_model_featurizer]
luna_190305_teams.intents.fst_lang_model.INT
intent.fst_lang_model.tagger.infile

這邊沒有必要的intent 不需要 做任何事


[qd_teams_intents_hotfix_featurizer]
luna_181019_teams.intents.hotfix

intent hotfix file
?  以後要hotfix可能需要他
   

=====================
slot pattern 打算  07252019
=====================
after slot lccrf

[qd_teams_slots_fst_lang_model_featurizer]
luna_190118_teams.slots.fst_lang_model
slot.fst_lang_model.tagger.infile
有position Ref 的pattern 但是不是order ref  schema 沒有不需要

目前把它加成partial overrider 的pattern 了
? 是不是要partial override 不太確定


=====================
canonical value  打算  07252019
=====================
for teams
param:datastorelookup_datastores=
luna_teams_slots.canonicalentities.teamsuser_activitytype.txt,
// 需要
luna_teams_slots.canonicalentities.teamsuser_contactname.txt,
luna_teams_slots.canonicalentities.teammeeting_quantifier.txt,
luna_teams_slots.canonicalentities.slide_number.txt,
luna_teams_slots.canonicalentities.teamspace_tab.txt,
luna_teams_slots.canonicalentities.teamsuser_status.txt,
luna_teams_slots.canonicalentities.position_ref.txt,
// 需要
luna_teams_slots.canonicalentities.file_filerecency.txt,
但是改成自己的 
然後只有recent  沒有most recent 了

// 需要
luna_teams_slots.canonicalentities.file_filetype.txt,
//需要
luna_teams_slots.canonicalentities.file_sharetarget.txt,



for files
要自己加
order_ref
從communication 借用一下
luna_communication_enus_mv1.canonicalentities.order_ref.txt
but 他的不make sence
先用自己的word 來搞定

sharetarget_name
?好像是this 以後要加再說  現在先不管



====================================
evaluation 打算
=====================================
參考yue 的pr
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1182483?_a=files


integrate 之後
用這個跑
 .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\CoreScienceDataStaging\target\distrib\Debug\x64\files_model  --variant model -dl files --clientId EvalClientId
 
 
 已經建立好的PR
 https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging?version=GBusers%2Fchiecha%2Fsetup_files_domain_evaluation
 
 
 
====================================
bug or data generate attention
=====================================
08262019
https://msasg.visualstudio.com/Cortana/_workitems/edit/1946532
my model  still run
need to generate data

08262019
https://msasg.visualstudio.com/Cortana/_workitems/edit/1972731
my model is correct


08262019
https://msasg.visualstudio.com/Cortana/_workitems/edit/1899709
go to mohit chat
? 等之後看
 
 email title from ming
 it shoul have problems
 1972448 - [LU] Teams iOS DF - Open msai lt notebook
 
 08302019
 有一些query 要fix
 not form ming , 是query 跟people skill conflict
 https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1217677?_a=overview



09052019
calendar negative pattern 增加了
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1228764?_a=files




09092019
inmeeting negative pattern
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1236686?_a=overview
可以參考


09112019
有些query 以後要是files 只要verify 就行  現在還沒切過去
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1242305?path=%2Fdatasources%2FTeamsAction%2FTraining_Data%2FTeamsAction_Intent_Training.tsv&_a=overview



09162019
teams 把docs / doc 跟document 都tag了
但是file answer 只有tag docs 跟doc 沒有document
有pattern 但是不是domain pattern 有空要看一下
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1249894?_a=files



09172019
有file_title 的功用
明天抓
https://msasg.visualstudio.com/Cortana/_workitems/edit/2015284


09252019
teamsaction file remove .domain patterns update 
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1275240?path=%2Fdatasources%2FTeamsAction%2FFST_Source%2Fdomain.positive_overwrite.infile&_a=overview
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1273877?_a=overview


09262019
teams contact name enhancement
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1276740?_a=overview


10032019
add open chart as negatie pattern
? revisit it in the future
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1293756?_a=files


10072019
inmeeting 放到evaluation 的pr
因乖不用改pattern 我猜
怎麼放到inmeeting 可以參考
10172019
files domains has been added to this 

but not to deplpy (prefer searching gold by itself)
if want to enable deploy
follows up this deploy in the future
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1212543?_a=files&path=%2Fsrc%2FCopyModels%2FOneRuntimeTargetConfig.xml

https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1298564?_a=files



10072019
search for message
teamsaction 改動   files 因該也要跟著改動
10072019 enable sdk 的時候還沒  之後改
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1299645?_a=files



10282019https://domoreexp.visualstudio.com/MSTeams/_workitems/edit/682442
file _type shlot pattern from teams
以後可以參考
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1342759?_a=files


10292019
open for share for 
prevent tagging for 
for 有很多cases 最好都copy 起來.....
以後研究
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1350005?isPreview=false&path=%2Fdatasources%2FTeams%2Fresources%2Finfiles%2Fdomain.fst_lang_model.tagger.infile&_a=files
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1356146?iteration=3&base=2&_a=files
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1361124?_a=overview




12102019
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1413782?_a=overview
inmeeting patterns added
以後可能show or bring up pull up 都要
https://carina/clu/cortana/review/schema
至少schema 要support


12122019
MSIT lexicon
可以問一下raj 有沒有用
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1377248?path=%2Fdatasources%2FLexicons%2Faliases.txt&_a=overview
