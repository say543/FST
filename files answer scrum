=================
share path 
==================

\\DESKTOP-3J7614O\sharemodel
sharemodel (file://DESKTOP-3J7614O/sharemodel)

\\DESKTOP-3J7614O\sharemodeltest
sharemodeltest (file://DESKTOP-3J7614O/sharemodeltest)

for training data
\\DESKTOP-3J7614O\sharemodeltest\files_slot_training.tsv

\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_20190716-20190831_16kslot_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_20190716-20190831_16kintent_evaluation.tsv

\\DESKTOP-3J7614O\sharemodeltest\Validating_Teams_JulyToSep_slot_evaluation.tsv



\\DESKTOP-3J7614O\sharemodeltest\UHRS_Task_3SFilesAnnotationintent_evaluation.tsv
\\DESKTOP-3J7614O\sharemodeltest\UHRS_Task_3SFilesAnnotationslot_evaluation.tsv







files domain 怎麼onbaord 到evaluation
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1182483?_a=files
看這個pr


======================
compliance path ticket
https://msasg.visualstudio.com/Cortana/_workitems/edit/2110312
======================
phone has a picutre of it as well
runtime data is redaptive
sr pipiline (以後的mpd 都還有)



==============
lexicon bin for slot training

this file name
slots.lexicon.desc.txt


MLGTools.exe 直接生成bin

1.2.341 folder 沒有MLGTool  
CMF 是共用底層的c++ 不用用到MLGTools.exe
兩個行為一不一樣很難說

==============
you can use mlgtool to compile this bin directly 

/? 1.2.341 no MLGTools.exe so using  1.2.301
E:\fileAnswer_data_synthesis\CMF_training> .\bin\CLU.Core.1.2.305\MLGTools.exe feat2proc -fsrc=E:\fileAnswer_data_synthesis\CMF_training\resource\LexiconFiles\slots.lexicon.desc.txt -fbin=E:\fileAnswer_data_synthesis\CMF_training\files_enus_mv1.slot.mlg.lexicon.bin

this will generate bin 

已知
// . 不work
calendar_positive4:RegexICL(^(skype|join|connect|teams) .*?(event|meeting|appointment)s?$)
改成
// a-z ok
share_targetname_positive1:RegexICL(^(skype|join|connect|teams) [a-z ]* (event|meeting|appointment)s?$)






==============
email title 可以之後討論
RE: Teams client id on Mobile
==============
有說明teams 的client 



=====
share index from 3s teams
email title
====
Constraint index information:
•	Presentation on CI here 
•	Overview of grammar rules – here 
•	You can find samples queries along with the actual rules here
•	We currently allow queries on fileName, Author, FileExtension properties. We will be adding support for queries on shared by username and email (these are for attachment entities).  

Regards,
Arun


=============================
qcs query level bucketize output

email title
"Re: Generating confidence buckets for answers "

=============================


=============================
3s answer teams patterns
=============================
3s answer teams pattern
https://msasg.visualstudio.com/Substrate/_git/SubstrateTools?path=%2Fsrc%2FTools%2FAnswerQualityTool%2FQueryGen%2FStaticContent%2FFilePositiveQueryPatternsWithSlots.txt&version=GC9da6aa8be4341cc97d4784052f27fc6b6c6337f0

跟
E:\fileAnswer_data_synthesis\CMF_training\resource\Data\file_type_measurement
3SAnswersOfflinePR.xlsx 的pattern 是一模一樣的
看起來沒有新的pattern

=============================
msb data mining
=============================
參考sajal 的discusssion 之後整理
scope studio 安裝整理
參考這個document
https://microsoft.sharepoint.com/:w:/r/teams/Cosmos/_layouts/15/WopiFrame.aspx?sourcedoc=%7b69768A80-3A08-414E-AF13-7072E692DCF9%7d&file=SCOPEStudio-Installation-Instruction.docx&action=default&cid=29412c01-974f-4229-942e-c0a50aee563d


參考email title from Thomas lin
'steps for query log mining'

以前tom 的applications
E:\mercury_scope\ScopeApplication1

用cosmo 11 discussion

在search bar
搜尋vc selector 就可以加上cosmo 11 science prod
這個是我們現在的solution

This creates a scope job.  You can track the jobs on the cluster at 
// 要改成cosmo 11
https://cosmos11.osdinfra.net/cosmos/science.prod/users/chiecha/

To see just your jobs, click the “My Jobs” tab.  
Each job also has a link, e.g., 
when I ran this, it created a link at https://cosmos09.osdinfra.net/cosmos/relevance/_Jobs/0804c692-0bc4-4c29-901b-117dbe4e60d5 .  
From the links, you can go to the “Script” tab to see the script that was run.  
The “Job Stages” tab tells you how close the job is to completing.

參考 msb_script1 or msb_script2 or msb_script3 or msb_script4

似乎data teams 的data
只有available 3個月


用QCSQuerylabel 跑dataset q
可以輸出一堆東西
//calendar examoke
queryclassificationprocessing\QCSQueryLabelWithLES.exe -c d:\SearchGold\deploy\builds\data\answers\QAS12HttpQAS --variant cortana_calendar_enus_mv8 -d calendar -i E:\src\git\Cortana\CoreScienceDataStagingKingston\evaluation\AnnotationSetsConverted\Files\UHRS_Task_3SFilesAnnotation.Trimmed.Converted.tsv --queryInColumn 5


注意不要改放external features column 這樣會造成讀external column 但是沒有data
// my common
.\QCSQueryLabelWithLES.exe -i E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted\Validating\Validating_Teams_20190716-20190831_3k.tsv --queryInColumn 5 --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\searchgold\deploy\builds\data\answers\QAS12HttpQAS\  --variant files_enus_mv1  -dl files

ouput 會輸出在同一個directory
eg: output xxx.maxent.output.txt
這個就是所謂的domain output
Validating_Teams_20190716-20190831_3k.tsv.files.maxent.output.txt

要跟sajaj 要bucketized 的code






=============================
substrate data mining
=======================
we have developed one tool (in its baby version) which could allow you to play with self-substrate data to explore different techniques, and quick demo. for details refer ======
https://microsoft.sharepoint.com/:w:/t/LUKnowledgeandSearchRelevanceLUKAS/ER658CYsjUZOt6CDfDHckJoBmoIxrygzGCDPRY3T1gHeqw?e=Q02ZSd


=============================
domain model retraining
============================

參考mingwoo 的 communication domain training
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging?path=%2Fdatasources%2FCommunication%2FCMF%2Fresource%2FData&version=GBmaster
可能可以參照domain training 的samples


===========================
q2
email title has detail
FW: LU question on File skill on Windows
===========================
selection model needs some work
如果沒有cutoff 大概就不需要了



===========================
retrun in selfhost ring
===========================
[query_domains:Microsoft_Threshold_Shell_3_enus_Test]
這個地方加上
files=files_enus_mv1::qd_files

=====================
1.0 to 0.99  domain pattern 
=====================
09/24/2019

recall will be very low
since teamsaction might have 1.00  but those queries are files 
sp fail


=====================
intent trade oof
=====================

Bring up ?
set to file_navigate at this point

Bring of

display




=======================
threshold cut off
=======================

QAS12 having the file
cortana_calendar_enus_mv8.queryprocessingconfiguration.ini

processabovedomainconfidencethreshold=0.4

must configure by yourself, cannot use CMF

adding to those
[qd_files_intent_featurizer]
[qd_files_slot_featurizer]
[qd_files_slot_partial_pattern_featurizer]


after short pattern boost 

[3s dataset _after_filtering]
<test 1>
all to intent and all slots
1>
processabovedomainconfidencethreshold=0.3
bef  after 
domain with issue more . query F1 download but query P/R increase

totla is 86  with domain issue
most
< 0.2
34 querys
<file_keywrod> by <contact_name>
<file_keywrod> <contact_name>




0.2 <= ....  <= 0.3 
34 querys
<file_keyword>
<contact_name>
<file_keywrod> by <contact_name>
<file_keywrod> <contact_name>


<test2>
only add 0.3 to slot




================
timex information
==================
.\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\searchgold\deploy\builds\data\answers\QAS12HttpQAS  --variant files_enus_mv1  -dl files

externalFeaturesColumn 的order 不重要  怎麼provide 會自己被parse 的樣子

        Inputs:
                ExternalInput1 (tag: 0, string: 7)
                        show[0,0]=1
                        the[1,1]=1
                        file[2,2]=1
                        i[3,3]=1
                        worked[4,4]=1
                        last[5,5]=1
                        week[6,6]=1
                ExternalInput2 (tag: 7, string: 0)
                        0[0,0]=1
                        0[1,1]=1
                        0[2,2]=1
                        4[3,3]=1
                        10[4,4]=1
                        7[5,5]=1
                        7[6,6]=1
                ExternalInput3 (tag: 0, string: 1)
                        2018-03-12 19:00[-1,-1]=1
        Output:
                Timex3 (tag: 0, string: 4)
                        <!-- NOMATCH -->[0,2]=0
                        <!-- NOMATCH -->[3,3]=0
                        <!-- NOMATCH -->[4,4]=0
                        <TIMEX3 tid="0" type="Date" value="2018-W10">last week</TIMEX3>[5,6]=1

================
memory evaluation
==================

0719 first model
E:\CoreScienceDataStaging\datasources\Files\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\searchgold\deploy\builds\data\answers\QasBatWStatic  --variant files_enus_mv1 -dl files



	Line 30: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E15677D8EB" String1="Memory delta for component files_enus_mv1::qd_files_preprocess_featurizer is 320 Kb; time delta is 14.349 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 33: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156795E55" String1="Memory delta for component files_enus_mv1::qd_files_domain_featurizer is 372 Kb; time delta is 6.641 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 41: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E1567C4285" String1="Memory delta for component files_enus_mv1::qd_files_intent_featurizer is 8 Kb; time delta is 6.645 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 45: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E1567EC62F" String1="Memory delta for component files_enus_mv1::qd_files_slot_featurizer is 8208 Kb; time delta is 8.839 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 52: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156815C72" String1="Memory delta for component files_enus_mv1::qd_files_slot_partial_pattern_featurizer is 6164 Kb; time delta is 7.634 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 55: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156837DDA" String1="Memory delta for component files_enus_mv1::qd_files_timeresolution_featurizer is 16424 Kb; time delta is 5.059 ms. Type is MLG34PipelineFeaturizer. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 57: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E15683F2C2" String1="Memory delta for component files_enus_mv1::qd_files_domainclassifier is 0 Kb; time delta is 0.062 ms. Type is MLG34DomainClassifier. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 59: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156848EC0" String1="Memory delta for component files_enus_mv1::qd_files_queryparser is 0 Kb; time delta is 1.125 ms. Type is MLG34CrfQueryParser. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 61: i,08/14/2019 13:46:24,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156855163" String1="Memory delta for component files_enus_mv1::qd_files_entityextractor is 4 Kb; time delta is 0.095 ms. Type is TokenEntityExtractorImpl. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 63: i,08/14/2019 13:46:25,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E156864F0B" String1="Memory delta for component files_enus_mv1::qd_files_domaintaxonomy is 0 Kb; time delta is 4.481 ms. Type is MLG34DomainTaxonomyClassifier. Memory and time reporting are non-reliable because of asynchronous initialization."
	Line 65: i,08/14/2019 13:46:25,QCS,,SrcFile="QCSAutopilotLog" SrcFunc="QCSComponentManager" SrcLine="0" Pid="28680" Tid="19400" TS="0x01D552E15687D489" String1="Memory delta for component files_enus_mv1::qd_files_timeresolution_metadataretriever is 4 Kb; time delta is 5.685 ms. Type is ExposeFeatureMetadataRetrieverImpl. Memory and time reporting are non-reliable because of asynchronous initialization."

around 40MB


=================
medadata
=================


=================
knowledge from teams
================
[10:27 AM] Yue Ma
    
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging?path=%2Fmodels%2Fteams%2Fluna_teams_slots.canonicalentities.file_filetype.txt&version=GBmaster => will keep the same canonical mapping in new domain

==============
items
===============

3s search
   need to find out what tests available?
   for golden sets
Scenarios tests
Integration Tests
FrisBee Test ( only for cortana)




how to sync with skill teams regularly?
    pretty hard
    
    
 scenarios is more detailed compared to intent
 one intent will have differene scenarios


07312019
swtich from CLU.core.1.2.286 to 1.2.305 for training 看看


================
07302019
files schema 跟team schema 討論
================


intent level 

1. file navigation intent
instance1 (for teams) for teams 這個部分 file_search mpa 回去file_navitation
    要考慮會不會產生overtrigged
instance2 (for 3s answer) 這個部分  file_search 還是file_search


<discuss>
跟skill teams 的討論  感覺不太care 是不是navigation intent, file search ?


show me my recent files / show me my files
show me files i was working on 
只用slot 無法分辨
一定要file navigate  有沒有slot 無關

but 
open the files I recently worked on
這個是file_open (在) spec 但是也需要 slot


所以需要maintain 兩個intent
slots 就用 file_recency (要不要包含I 再說) 跟file_action



  <action_item>
       teams_intent_training_after_filter.py done
       E:\fileAnswer_data_synthesis\CMF_training\resource\intents.txt 加intent



slot level

2. file_filerecency
   slot 變成 file_recency
   目前plan 用files 的file_action  (雖然只tag action, not i was)
    把一些特別的verb 轉成要求的file_recency 的canonical value
    來support 
    
    
3.1 file_sharetarget
   instance1 (for teams) for teams 這個部分 會expose for cortana skill team
   instance2 (for 3s answer)  這個tag 會被移除
   p.s 兩個physical instatnce 會有不同的featurier

<discuss>
    覺得file_sharetarget 要新加
    person 除非用canonical value 來tell 否則很難
    其他的很難train 我覺得


3.2 teammeeting_title
   instance1 (for teams) for teams 這個部分 會expose for cortana skill team
   instance2 (for 3s answer)  這個tag 會被移除
   p.s 兩個physical instatnce 會有不同的featurier

<discuss>
    覺得teammeeting_title 要新加
   
4. file_search
    直接給teams 同name
  
5. file_name or file_keyword
    直接給teams 同name
    
6. start_time
    直接給teams 同name
7.file_type
    直接給
    
   
   
目前剩下的issue
 1> two start_date  or start time issue  
 open the <?>last week<?> file i edited yesterday
 we can tag two start date 但是不知道skill teams 怎麼處理
  
  what are <file_keyword> last weeks tasks </file_keyword>
  find <file_type> note </file_type> from <start_date> last week </start_date> <file_keyword> to do ' s </file_keyword>
  <start_date> last week </start_date> ' s <file_type> notes </file_type>.
  
  yong : 這個先不管 丟給partner teams 
  要嘛只tag 一個 or  tag 2 個 但是先不管skill teams 會怎麼動
 2> 
 open the file <cnotact>A shares to me 
 open the file i share to susan
 
 if we need to differentaite, we might need to add two like from_contact_name and contact name.
 
 yong:
 加兩個slot 然後兩個都tag
   實際的my stuff data 兩個都存在
  
  
  <action_item>
       files_mystuff_after_filter.done
       
       用contact_name 跟to_contact_name
       這樣to_contact_name 基本都是i
       contact_name 有i 也一堆沒有i 的
       
       teams 的在說
       E:\fileAnswer_data_synthesis\CMF_training\resource\slots.txt 
       先加slots
       lexicons 的部分
       E:\fileAnswer_data_synthesis\CMF_training\resource\LexiconFiles\slots.lexicon.desc.txt
       把contact_name 跟to_contact_name 用不同lexciocn name 但是content 依樣
       contact_name:Trie(.\resource\LexiconFiles\contact_name.txt)
       tp_contact_name:Trie(.\resource\LexiconFiles\to_contact__name.txt)
       p.s 現在兩個裡面都沒有i (contact_name) and me(to_contact_name) 
       ? 可以之後考慮要不要加
       
       
       
      
       
       
       
   
  
 
 
  3>
  timeX issues
  
  yong:
  讓partner teams 去決定
  


 4>
  training issue
  <file_action>
  open photos
  show me a picture of one hundred and seven
  ? open / show  tagged as file_action  這個之後要討論一下  覺得不用tag
  work on 覺得只tag work 比較好  schema 要跟著調整
  my recent downloads
  ? downloads 不知道要不要tag
  
  
  attached 
  ? 不知道skill teams要不要  但是我覺得都先tag 吧 等compliant 再說
  
  
  titled <title> christmas list </title>
  titled 先 不tag file action
  
  <start_time>
  ? recent 藥用start time or file_recency  
  目前把recent / recently  大小寫都變成order_ref
  因為order_ref 要用來代替teams 裡面的 file_recency
  靠canonical value 來給
  
   
  find the task note i created last week  沒學好  要找找


  <order_ref>
   要保留
  因為order_ref 要用來代替teams 裡面的 file_recency
  
  <data_source>
     ? computer 覺得不因該是
     先留著等他抱怨再說
     ? outlook 不確定
  
  
  <file_name>
     沒有足夠的examples
     
     grocery list
     grocery 不是title 要轉乘keyword
     grocery list -> keyword -> file_keyword
     
     christmas list
     不是title 要轉乘keyword
     christmas list -> keyword -> file_keyword
     
     除非有title
     titled <keyword> christmas list </keyword>
     christmas list title -> file_name
     
     say hey cortana show me my task list
     tasl list -> keyword -> file_keyword
     
     find me my music list
     music list -> keyword -> file_keyword
     
     <keyword> music </keyword> <data_type> playlist </data_type>
     music playlist -> keyword -> file_keyword
  
  
     <title> shopping list </title>
      shopping list -> keyword -> file_keyword
      
      
      watch list
      music playlist -> keyword -> file_keyword
      
      walmart list
      walmart playlist -> keyword -> file_keyword
      
      ideas list
      
      
      ? named  something 
      look for he photos named " christmas
      先把它當成 title -> file_name 
      
      
      ? marked 要討論後面是file name or file type
      目前把called , titled 當作file_name
      現在先不管
      
  <file_keyword>
  
     因為list 在 file 不是tpye 
  
     what is on my <title> to-do </title> <data_type> list </data_type> ?
     這to-do list 都轉成keyword  -> file_keyword 因為沒有.doc
     
     
     show me my to do list
     to do list 要轉乘file_keyword
     
     what is in my shopping list
     shopping list 改成file_keyword
     
     <keyword> shopping </keyword> <data_type> list </data_type>
     
     find my <data_source> downloads </data_source>
     teams 裡面是data_type 但是這個file navigation 會給teams 
     怎麼tag 沒差  把她轉成file_keyword     
     
     
     what is in my <title> shopping list </title> ?
     shopping list 變成 keyword -> file keywrod
     
     
     // old 先不管
     team  不懂
     what is in my <keyword> shopping </keyword> <data_type> list </data_type> ?
     
     發現有data type 前面是keyword 比較難train 可以之後調整...


     where is my <data_type> music </data_type> library
     team  不懂
     music library 因該要轉成keyword
     
     <data_type> music </data_type> library
     
     
     mystuff	looking for my <keyword> resume </keyword> , <title> resumecurrent </title> .
     resume 因該什麼也不是
     resumecurrent  -> keyword -> file_keyword
     
     find the <data_type> note </data_type> with my <title> to - do list </title> .
     <title> to - do list </title> 轉成  keyword  -> file_keyword
     
     
     find my pictures from italy
     italy 變成keyword  -> file_keyword
     
     <data_type> visio diagrams </data_type>
     變成keyword  -> file_keyword
     
     windows 10 technical preview doc
     windows 10 technical preview -> k -> f
     
     ? search for justin and ashley in my files
     justin and ashley不確定要不要合併
     先consistent合併
     
     Find my <keyword> homework for tomorrow </keyword> .
     先把tomorrow
     
     <keyword> two thousand fourteen </keyword>
     ? 很難說是date or file key word 先不管
     有這個query 得先拿掉
     
     
     有query 是
     Open my <file_keyword> that I created </file_keyword> 
     會影響created 的traningi 目前沒有好的方法
     
     letters i wrote
     
     有query 是
     <file_keyword> a </file_keyword>
     會影響file_keyword 的  精確度
       
     open <file_title> this </file_title> 
          ? 這個沒有說 先follow up teams
         
     share <file_title> this </file_title> 
         guideline 有
	 
	 this -> file_title -> file_keyword
	 
	 
     red and second red
         先把整個全部都當成keyword
       
       
     new project
         有keyword 有沒有tag....
	 先把它當成keyword
	 
       
  <file_type>
     go to my <data_source> documents </data_source
     teams 是file navagate 沒有tag documents
     先都轉成data type
     
     take me to <data_source> documents </data_source>
     teams 不懂
     先都轉成data type
     
     show me my <keyword> lists </keyword>
     keyword 都轉成data_type
     teams 沒behavior
     
     
     
     
     show me the documents with <keyword> headache </keyword> in the title
     documents? 先不tag 
     
     
     
     
     
   
     <data_type> documents </data_type>
     <data_type> document </data_type>
     documents 先不tag by Ling
     
     <data_type> docs </data_type>
     <data_type> doc </data_type>
     doc 先不tag by Ling
     
     
     
     
     note
     ? 先留著等complain 再說  雖然list沒有說 但是可能會影響one note 的辨別
     要在investigate
     
     music
       ? 可能是file_type or file_keyword
       最好都consistent 還沒決定
     
     slide
     ? 先留著等complain 再說  雖然list沒有說 先follow teams
     
     documentation
     ? 先留著等complain 再說  雖然list沒有說
     
     ? notes 要不要之後看
       先留著等complain 再說  雖然list沒有說
     ? resume
        先留著等complain 再說  雖然list沒有說
	file_keyword
     ? movie
        先留著等complain 再說  雖然list沒有說
	
     ? email
       因該不是data type 先拿掉
       
     ? presentation 要不要之後看
     ? power point presentation
     ? photos
         先留著等complain 再說  雖然list沒有說
     ? pictures /picture
          先留著等complain 再說  雖然list沒有說
     ? app / apps
	  先留著等complain 再說  雖然list沒有說
     ? screenshots
          先留著等complain 再說  雖然list沒有說
     ? photographs
          先留著等complain 再說  雖然list沒有說
     ? letter /letters
       先不當作data_type 因為spec 沒有說
     ? text
       先留著 等complain 再說 雖然list 沒有說
     ? txt
       先留著等complain 再說  雖然list沒有說
     ? lock
       先留著等complain 再說  雖然list沒有說
     ? word
       先不當作data_type 因為spec 沒有說
       
     ? game / games 
       先不當作data_type 因為spec 沒有說
     ? list / lists / listing / list doc
        因為teams golden 的原因  先不把它當成file_type  follow teams
	
     ? checklist
        先不當作data_type 因為spec 沒有說
	
	construction documents checklist
	
	(o)construction documents 是file_keyword , checklist 不是type
	or
	(x)construction documents checklist 整個事file_keyword
        ? confirm in the future
	
	doc 也不是file type 
     ? music 
     ? spec file type
     
     ? word
       先不當作data_type 因為spec 沒有說
     ? template
        先不當作data_type 因為spec 沒有說
     ?microsoft word
       先留著等complain 再說  雖然list沒有說
     ? microsoft office word
       先留著等complain 再說  雖然list沒有說
      
     ?Word document
       兩個token 都不mark
     ?word doc
        word 移出來  doc 變成data_type -> file_type
       
     
       
  
     09052019
     from file answer teams
     doc docs docx spec specs 都要tag'
       有data 要改正 
       
       doc docx 要把file name 跟docx 分開
       
       doc 比較重要在他的bug bash
       spec specs 還好
       
     workbook 沒data
       bug bash 沒有
     
     notebook 
     notebooks 
       沒啥dATA 但是要改正
       可能也要生DATA
       bug bash 沒有
       
    gif png
       可能要改正 有data
       bug bash 沒有
       
    msg
       沒啥太多的data 只有from file_name 可能可以增加
       bug bash 沒有
    ics 
       沒有data 要生
       bug bash 沒有
    vcs 
        沒有data 要生
	bug bash 沒有
    vsdx, vssx. .vstx. vsdm. vssm. vst,vdw, vss, vst
        沒有data 要生
	can use vsd query 來generate data
	bug bash 沒有
     mpp, mpt 
        沒有data 要生
	bug bash 沒有
	
	
	

    
       
      
       
      
      
     
     
     
     
     
     
     
     
  
   <data_source>
     what is in my <data_source> music file </data_source> 
     music 因該要是file key word
     teams 沒behavior

     <data_type> onenote </data_type>
     onenote 因該是 data_source
     8/7/2019 討論
     ? 需要offline discussion
     
     <data_source> notes </data_source>
     <data_source> note </data_source>
     notes 不是data source
     
     ?notepad 算不算
     
     
     ?excel 是不是data source
     no
     
     Check <data_source> my documents </data_source>
     ? my document 因該不是data source 之後再改
     
    <data_source> c:/document </data_source>
    
    <file_name> h:\documents </file_name>
       改成data source for consistent
    
    
    <data_source> %appdata%\microsoft\document </data_source> <file_keyword>
     <data_source> clean kind:=document </data_source>
        ? data source is not majority so keep it this way 都不改
     
     <data_source> document </data_source>
        ? document 目前agree 不是data type
	data source is not majority  so 都先不tag 
        <data_source> document </data_source>  -> document
     
   <contact name>
      mystuff	i want to see the <data_type> note </data_type> for <keyword> wendy ' s </keyword>
      ? wendy 不是人名  先不管  因為小寫
      
      
      find pictures of my wife
      ?  my wife 如果有my wife , my something 都先skip
      
      mystuff	<data_type> pictures </data_type> of <keyword> me when i was a baby </keyword>
      
      ? 這個case i 未必是cohtact name
      先skip
      
      
      show my pictures of sunset from kim
      ? 這個my 不知道是不是to_contact_name 先skip
      
      
   <file_recency>
      Show me the files that I was only using
      ? only 先不tag
      
   mystuff 相關
      give me my <keyword> copied </keyword> files
      ? 先把這個copied 轉成 file_actioned
      還不確定
      
      i created 
      
      
      Can you open my "I was working on recently" file for me
      ? 這個query 到底是要把整個變成 key word or 分成file keyword 跟
      
      i created 
      ? 這個query 也有相關的問題
      
      <order_ref> first </order_ref>
      first 因該要是position_ref 不是order_ref
      ? 目前先這樣寫到guideline 以後再說
      
      
      
      last night
      my stuff 是start_time
      calendar 是start_date
      ? 先follow calendar 當作start_date
      
      
   <file_folder>
      show my downloaded files
      downloaded 也當成 <keyword> -> file_folder
   
   teams 相關
     cortana find my <order_ref> most recent </order_ref> <keyword> downloads </keyword>
     要轉成file_recency 
     downloads -> data_type -> file_type
     
     find me <quantifier> all </quantifier> documents
     documents -> data_type -> file_type

     where are my downloads
     downloads -> data_type-> file_type
     
     
     
     
     find downloads / open downloads
     teams no action 
     先把downloads 當成keywords -> file_keyword
     
     find my downloads
     teams 有action 但是覺得不合理
     先把downloads 當成keywords -> file_keyword
     
     where can i find my latest downloads
     
     check my downloads
     teams no action 
     先把downloads 當成keywords -> file_keyword
     
    
     pull up my <data_source> downloads </data_source>
     teams 到download 只好變成data_type 
     
     downloads -> data_type-> file_type
     
     
     take me to my downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type
     
     take me to downloads
     teams 到download 只好變成data_type 
     
     downloads -> data_type-> file_type
     
     go to my downloads
     downloads -> data_type-> file_type
     
     view downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type  
     
     view my most recent downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type  

     
     i'm looking for my latest downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type  
     
     bring up my downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type  
     
     show me downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type 
     
     show me all my downloads
     
     show me my <start_time> recent </start_time> downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type   
    
     tell me my downloads
     teams 到download 只好變成data_type 
     downloads -> data_type-> file_type
     
     pull up all my downloads
     
     
     
     
     <meeting_starttime>
     ? 這個是可能可以改的  但是不確定前先不改成這樣
     my stuff
     what are the notes from today ' s meeting
     today 變成meeting_starttime
     meeting sharetarget_type
     
  <file_folder>
     <file_filetype> downloaded files </file_filetype>
     根據spec 先改成
     <file_folder> downloaded </file_folder> files
     intent 根據不同的queries verb 可能會不同
     但是這個type 永遠在
     
   <to_contact_name>
     ? share to someone
     因為teams 有tag 現在先tag以後再根據skill team 而感
     
     
====================
work konwledge
===================



可能的directory
E:\searchgold\deploy\builds\data\answers\QasBatWStatic
E:\searchgold\deploy\builds\data\answers\QasBatWStatic


可能的command



my stuff for reference
PS E:\CoreScienceDataStaging\datasources\Email_my_temporary\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\SearchGold\deploy\builds\data\answers\QAS12HttpQAS  --variant cortana_mystuff_enus_mv5 -dl mystuff


email for reference
PS E:\CoreScienceDataStaging\datasources\Email_my_temporary\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\SearchGold\deploy\builds\data\answers\QAS12HttpQAS  --variant email_enus_MV1b -dl email


teams for reference
PS E:\CoreScienceDataStaging\datasources\Teams\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\CoreScienceDataStaging\target\distrib\Debug\x64\models  --variant HttpQASINT_ML_OFFLINE_QAS_EVAL_INT.QAS01HttpQAS -d teams


files for reference
PS E:\CoreScienceDataStaging\datasources\Files\queryclassificationprocessing> .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\CoreScienceDataStaging\models\files  --variant files_enus_mv1 -dl files


fst file
PS E:\CoreScienceDataStaging\datasources\Files\resources\infiles> .\fst.exe -l .\slot.fst.partial.infile



如果不確定  在qp 看一下怎麼handle start time  / time slot 


directory
store single models
E:\CoreScienceDataStaging\models\file

do query processing analysis
PS E:\CoreScienceDataStaging\datasources\File\queryclassificationprocessing>

file requirement
https://microsoft.sharepoint.com/:w:/t/STCISearch/EaBGV9tupU1PmE29wtUY6lsBqveJnS9-utZtQ8TFExpihQ?e=W1Uue8


原始doucment
https://microsoft-my.sharepoint-df.com/:w:/p/yum/ERiEN4JphLNMgmNPr8ZUI2oBfNz5tleqQOFnMocgljoycw?rtime=-i-wKDYK10g


自己的comment
https://microsoft-my.sharepoint-df.com/:w:/r/personal/chiecha_microsoft_com/_layouts/15/Doc.aspx?sourcedoc=%7BFFA3E814-A82C-419B-9F83-117766DFC20A%7D&file=Document%201.docx&action=editnew&mobileredirect=true




=====================
domian pattern 打算  07252019
=====================
from teams domain pattern
[qd_teams_domain_fst_lang_model_featurizer]
negative patterns 這個

domain.negative.fst_lang_model.tagger.infile

file_open -> FileOpenNegativeDomain
這個可能要加進來
這個是contextual negalive tlist 
read text ../lexicons/contextual_negative_list.txt;
define ContextualFileOpenEntity;
之後migrate contextual lu 可能需要有他來用

有其他相衝domain 的pattern
目前不打算把它加進去
如果是negative 就是doamin score = 0, 因為後面0.5 的限制 (但是在files 現在沒有) 所以不會trigger 後面的行為
如果以後需要 可能要家0.5 的threshold (or 別的threshold)

[qd_teams_domain_fst_lang_model_intent_overwrite_featurizer]
positive pattern 的部分
domain.fst_lang_model.tagger.infile

有file_open
file_download -> FileDownloadIntent 可能要家一下


file_download
file_navigation 
file_share

teamspace_sharechannel
teamspace_sharetab
    改成 file_share
    可能以後再evaluate 到底需不需要他
teamspace_search
    改成file_search
    
teamspace_navigate
    改成 file_navigate
    可能以後再evaluate 到底需不需要他
    
    
也要加
但是細節上可能要再調整
因為有些case 現在希望是file_search 了  根據files 的guideline
之後再調整


但是這個是沒有domain svm 的情況
可能測試一下是要前面or 後面


[qd_teams_domain_pattern_featurizer]
感覺是另外一個positive pattern 的位置
domain.override.infile

file_navigate
   跟 domain.fst_lang_model.tagger.infile 的file_navigate 不完全相同
   domain.override.infile 多了recent 了一些東西

file_open
   domain.fst_lang_model.tagger.infile 沒有這個  是posive pattern 可以加
teamspace_search
   domain.fst_lang_model.tagger.infile 完全依樣
   不用加
file_share
   跟 domain.fst_lang_model.tagger.infile 的file_navigate 不完全相同
   domain.fst_lang_model.tagger.infile cover 的比較多
   
   
yue 說當初一個pattern 是1.0 另一個是0.99 但是現在score 都是0.99 了  所以直接merge 取最大的就可以





[qd_teams_common_domain_intent_featurizer]
luna_teams_intents.multiturn
特別處理跟common 的關西避免conflict in teams multi turn
可以先不管  

=====================
intent pattern 打算  07252019
=====================
after svnm


[qd_teams_intents_fst_lang_model_featurizer]
luna_190305_teams.intents.fst_lang_model.INT
intent.fst_lang_model.tagger.infile

這邊沒有必要的intent 不需要 做任何事


[qd_teams_intents_hotfix_featurizer]
luna_181019_teams.intents.hotfix

intent hotfix file
?  以後要hotfix可能需要他
   

=====================
slot pattern 打算  07252019
=====================
after slot lccrf

[qd_teams_slots_fst_lang_model_featurizer]
luna_190118_teams.slots.fst_lang_model
slot.fst_lang_model.tagger.infile
有position Ref 的pattern 但是不是order ref  schema 沒有不需要

目前把它加成partial overrider 的pattern 了
? 是不是要partial override 不太確定


=====================
canonical value  打算  07252019
=====================
for teams
param:datastorelookup_datastores=
luna_teams_slots.canonicalentities.teamsuser_activitytype.txt,
// 需要
luna_teams_slots.canonicalentities.teamsuser_contactname.txt,
luna_teams_slots.canonicalentities.teammeeting_quantifier.txt,
luna_teams_slots.canonicalentities.slide_number.txt,
luna_teams_slots.canonicalentities.teamspace_tab.txt,
luna_teams_slots.canonicalentities.teamsuser_status.txt,
luna_teams_slots.canonicalentities.position_ref.txt,
// 需要
luna_teams_slots.canonicalentities.file_filerecency.txt,
但是改成自己的 
然後只有recent  沒有most recent 了

// 需要
luna_teams_slots.canonicalentities.file_filetype.txt,
//需要
luna_teams_slots.canonicalentities.file_sharetarget.txt,



for files
要自己加
order_ref
從communication 借用一下
luna_communication_enus_mv1.canonicalentities.order_ref.txt
but 他的不make sence
先用自己的word 來搞定

sharetarget_name
?好像是this 以後要加再說  現在先不管



====================================
evaluation 打算
=====================================
參考yue 的pr
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1182483?_a=files


integrate 之後
用這個跑
 .\QCSQueryLabelWithLES.exe --externalFeaturesColumn 2 --queryInColumn 1 --interactive --verbose --encoding utf-8 --legacyAllowUnusedParameters -c E:\CoreScienceDataStaging\target\distrib\Debug\x64\files_model  --variant model -dl files --clientId EvalClientId
 
 
 已經建立好的PR
 https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging?version=GBusers%2Fchiecha%2Fsetup_files_domain_evaluation
 
 
 
====================================
bug or data generate attention
=====================================
08262019
https://msasg.visualstudio.com/Cortana/_workitems/edit/1946532
my model  still run
need to generate data

08262019
https://msasg.visualstudio.com/Cortana/_workitems/edit/1972731
my model is correct


08262019
https://msasg.visualstudio.com/Cortana/_workitems/edit/1899709
go to mohit chat
? 等之後看
 
 email title from ming
 it shoul have problems
 1972448 - [LU] Teams iOS DF - Open msai lt notebook
 
 08302019
 有一些query 要fix
 not form ming , 是query 跟people skill conflict
 https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1217677?_a=overview



09052019
calendar negative pattern 增加了
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1228764?_a=files




09092019
inmeeting negative pattern
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1236686?_a=overview
可以參考


09112019
有些query 以後要是files 只要verify 就行  現在還沒切過去
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1242305?path=%2Fdatasources%2FTeamsAction%2FTraining_Data%2FTeamsAction_Intent_Training.tsv&_a=overview



09162019
teams 把docs / doc 跟document 都tag了
但是file answer 只有tag docs 跟doc 沒有document
有pattern 但是不是domain pattern 有空要看一下
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1249894?_a=files



09172019
有file_title 的功用
明天抓
https://msasg.visualstudio.com/Cortana/_workitems/edit/2015284


09252019
teamsaction file remove .domain patterns update 
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1275240?path=%2Fdatasources%2FTeamsAction%2FFST_Source%2Fdomain.positive_overwrite.infile&_a=overview
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1273877?_a=overview


09262019
teams contact name enhancement
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1276740?_a=overview


10032019
add open chart as negatie pattern
? revisit it in the future
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1293756?_a=files


10072019
inmeeting 放到evaluation 的pr
因乖不用改pattern 我猜
怎麼放到inmeeting 可以參考
10172019
files domains has been added to this 

but not to deplpy (prefer searching gold by itself)
if want to enable deploy
follows up this deploy in the future
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1212543?_a=files&path=%2Fsrc%2FCopyModels%2FOneRuntimeTargetConfig.xml

https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1298564?_a=files



10072019
search for message
teamsaction 改動   files 因該也要跟著改動
10072019 enable sdk 的時候還沒  之後改
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1299645?_a=files



10282019https://domoreexp.visualstudio.com/MSTeams/_workitems/edit/682442
file _type shlot pattern from teams
以後可以參考
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1342759?_a=files


10292019
open for share for 
prevent tagging for 
以後研究
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1350005?isPreview=false&path=%2Fdatasources%2FTeams%2Fresources%2Finfiles%2Fdomain.fst_lang_model.tagger.infile&_a=files

