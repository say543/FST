
evaluation 可能遇到的bug page
https://microsoft.sharepoint.com/teams/CortanaCore/_layouts/15/WopiFrame.aspx?sourcedoc={6d6ae133-c9c8-400d-bfd8-ae8feec6ff9f}&action=edit&wd=target%28LU%20Tooling%2C%20Platform%20and%20Runtime%2FDev%20handbook%2FDevelopment.one%7C167a6855-2d14-4555-a326-affc6c35fa6f%2FModel%20Repository%20-%20Enlist%2C%20Setup%20and%20Structure%7C7e1929a0-cb51-4324-b4c4-97a79eda7d64%2F%29






========================
'RE: Deprecation of IntentConstraintMap-Lu-schema.tsv (+ action item for model owners)'
email title
========================
????
file type

corescience stage
E:/CoreScienceStaging/evaluation/Configs/AnnotationExceptions.xml


============================================================
07242019
昨天 Hasmik和我说 要把common config里的一些路径换成absolute的path
不然生成不了converged test case
==============================================================

E:\CoreScienceDataStaging\src\Evaluation.Converged.Tests\Common.config
昨天 Hasmik和我说 要把common config里的一些路径换成absolute的path
不然生成不了converged test case

// old 
  <add key="local.ModelsDir" value="..\..\..\..\target\distrib\Debug\AnyCPU\models" />
  <add key="local.ConfigsDir" value="..\..\..\..\target\distrib\Debug\AnyCPU\ConvergedTest\Data\Evaluation\Configs" />
  <add key="local.DatasetsDir" value="..\..\..\..\target\distrib\Debug\AnyCPU\ConvergedTest\Data\Evaluation\AnnotationSetsConverted" />
  <add key="local.OutputBaseDir" value="..\..\..\..\TestResults\Evaluation" />

  <add key="local.EvalMergedDir" value="%EVAL_MERGED_DIR%" />

// new 
  <add key="local.ModelsDir" value="E:\CoreScienceDataStaging\target\distrib\Debug\AnyCPU\models" />
  <add key="local.ConfigsDir" value="E:\CoreScienceDataStaging\target\distrib\Debug\AnyCPU\ConvergedTest\Data\Evaluation\Configs" />
  <add key="local.DatasetsDir" value="E:\CoreScienceDataStaging\target\distrib\Debug\AnyCPU\ConvergedTest\Data\Evaluation\AnnotationSetsConverted" />
  <add key="local.OutputBaseDir" value="E:\CoreScienceDataStaging\TestResults\Evaluation" />
  // Eval Merged Dir 這邊先給我自己給的  似乎任意填
  <add key="local.EvalMergedDir" value="E:\CoreScienceDataStaging\TestResults\EvaluationMergedDir" />
  
  這個mergedDir 就是最後合併生成qpc 的位置
  下面會生成E:\CoreScienceDataStaging\TestResults\EvaluationMergedDir\DBC6931A
  
  母次最好把DBC6931A 殺掉  再跑

  
 目前卡在download drop 會fail
  

E:\CoreScienceDataStaging\evaluation\Configs\AnnotationExceptions.xml
這個除非要igonre 某些slot 才要改
否則不用


filss qpc 要加這個
<!-- client id will be overrided by geneal setting  but empty here does not work , need to have a default one-->

[clients]
;;=================to support evaluation======================================================================
EvalClientId=EvalClientId

[query_domains:EvalClientId]
files=qd_files


E:\CoreScienceDataStaging\evaluation\AnnotationSetsConverted
這個才是new 新的annotationSet 的location 

yue pr 可以for reference
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1182483?_a=files

my pr 可以for reference
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging


my 更早以前的pr 可以當作reference
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequestcreate?sourceRef=users%252Fchiecha%252Fteams_40_tuneup2&targetRef=master&sourceRepositoryId=47fe635e-e02b-42d3-82e7-768da61e32c0&targetRepositoryId=47fe635e-e02b-42d3-82e7-768da61e32c0



raj pr for reference
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/commit/26bba96b5f465bd609ebb7a6da83860d5991022a?refName=refs%2Fheads%2Fmaster
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/commit/ad3c6ebd95ae436da6f26767974862bd2fd082b9?refName=refs%2Fheads%2Fmaster





要onboard new domain


08/28/2019
[要local test ]
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging?version=GBusers%2Fchiecha%2Fsetup_files_domain_evaluation_without_bigQPC_association
參考這個branch  (not checked just be reference)
two step process
1>  follow this pr to make sure fille will be populated to 
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequest/1182483?_a=files
額外的package 要安裝  參照這個
https://msasg.visualstudio.com/Cortana/_git/CoreScienceDataStaging/pullrequestcreate?sourceRef=users%252Fchiecha%252Fsetup_files_domain_evaluation&targetRef=master&sourceRepositoryId=47fe635e-e02b-42d3-82e7-768da61e32c0&targetRepositoryId=47fe635e-e02b-42d3-82e7-768da61e32c0

all new model should be here
E:\CoreScienceDataStaging\target\distrib\Debug\AnyCPU\models

2> 
因為HttpQasProd_CortanaLU.QAS12HttpQAS_CCCtest.queryProcessingConfiguration.ini
還沒有  設定client id 
step1:
sync searchgold
step2:
copy from  E:\searchgold\deploy\builds\data\answers\QAS12HttpQAS to E:\CoreScienceDataStaging\models
and 一定要rename  like (不能同名 否則會conflict) 
HttpQasProd_CortanaLU.QAS12HttpQAS_CCCtest.queryProcessingConfiguration
加上自己的client id 

重新evaluation compile then  HttpQasProd_CortanaLU.QAS12HttpQAS_CCCtest.queryProcessingConfiguration 也會populate 到
E:\CoreScienceDataStaging\target\distrib\Debug\AnyCPU\models

就可以run evaluation

[要checkin && deployment]
step1:
正常的cortana deployment 會把new domains files 都deploy 上去
但是這個時候HttpQasProd_CortanaLU.QAS12HttpQAS.queryProcessingConfiguration.ini
step2:
自己deploy QPK with 
HttpQasProd_CortanaLU.QAS12HttpQAS.queryProcessingConfiguration.ini
有新的client id 的update







