============
0701
Weekly scrum for Contextual LU / Teams file search
============

Hi Ming,

All model files and CMF files are under
\\corl\contextual-lu\model files

And how to run experiments are in the OneNote page:
Experiments How To  (Web view)  (這個是怎麼run evaluation test)


? 有空可以看一下

============
07262019
============

目前在teams 的contexual lu 的featurizer

[qd_teams_MV1_contextual_lu_featurizer]
PipelineBaseFilename=luna_teams_enus_mv1.contextual
luna_teams_enus_mv1_contextual.domain.pattern.fst
目前只有影響domain

teams_contextual_lu_domain.infile

ExternalFeatureSet:UserFileNames  
用到這個UserFileNames
? 要問一下這個怎麼存

output 1
UserFileNamesMatched
這個可以用在slots
[qd_teams_slots_lccrf_featurizer]
一般的slots_lccrf 沒有feautre 這邊可以學習建feature



實際的測試
open TeslaFile\tFEATURE.CLUTEAMS\t0\t1\t1\t1\t-1\t-1\tUserFileNames\t0\t1\tTeslaFile\t1\t-1
來看這個featurizer

這個純粹是string match 沒有pattern
output 1 = 
        Output:
                UserFileNamesMatched (tag: 2, string: 0)
                        0[0,0]=1
                        7[1,1]=1
                        
                  7 是mapped 過的tag number 用來target MagicFileName 有點像是 placeholder 
        這個是feature set slot crf 會用來train
output 2
teams_domain_fst_lang_model

fst pattern 
這個可以幫助domain score


BOS
似乎在apply pattern 前都要加BOS 這樣tag 才會正確

7 是mapped 過的tag number 用來target MagicFileName 有點像是 placeholder 

這邊目前只target 一個 scenario open xxx

可能以後會延伸

MagicFileName 的來源  runtime code  (shotbit 可以handle他)


有doman rule  for fileOpen
open MagicFileName



實際的測試
open TeslaFile\tFEATURE.CLUTEAMS\t0\t1\t1\t1\t-1\t-1\tUserFileNames\t0\t1\tTeslaFile\t1\t-1
來看這個featurizer



[qd_teams_slots_lccrf_featurizer]
luna_teams_enus_mv1.slot.model

跟一般的slots lccrf 相比

多了
        //複製input feature
	FeatureReplicate --in=ExternalInput2 --out=S_Teams_Contextual_File_Name --xform=span
        
        //index 像後shift 1
        FeatureShifter --in=S_Teams_Contextual_File_Name --out=P1_S_Teams_Contextual_File_Name --shift=1
        //index 像後shift 2
	FeatureShifter --in=S_Teams_Contextual_File_Name --out=P2_S_Teams_Contextual_File_Name --shift=2
        //index 像前shoft 1
	FeatureShifter --in=S_Teams_Contextual_File_Name --out=N1_S_Teams_Contextual_File_Name --shift=-1
        //index 像前shoft 2
	FeatureShifter --in=S_Teams_Contextual_File_Name --out=N2_S_Teams_Contextual_File_Name --shift=-2

        // P1_S_Teams_Contextual_File_Name 跟原本的lccrf 1_gram 給合併
	FeatureConjunction --in=P1_S_Teams_Contextual_File_Name,lccrf_ngram_1gram --out=P1_S_CONJ_1gram_P1_S_Teams_Contextual_File_Name_lccrf_ngram_1gram --WeightOperator=max
        
        
        // 新家了這些feature
        // P2_S_Teams_Contextual_File_Name + N1_S_Teams_Contextual_File_Name + N2_S_Teams_Contextual_File_Name
        // P1_S_CONJ_1gram_P1_S_Teams_Contextual_File_Name_lccrf_ngram_1gram
        
        // 為什麼要shift 不太懂
        SparseLinearChainCRF
        https://msasg.visualstudio.com/QAS/_git/qas?path=%2Fprivate%2Fanswers%2FSDS%2FQCS%2Flib%2Fsrc%2Fmlg3.4%2Fdoc%2FSparseLinearChainCRF.md&version=GBmaster
        


         


